(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5860],{1709:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var n=t(37876);let r=e=>{var s=e.title;return(0,n.jsx)("div",{className:"flex justify-between items-center",children:(0,n.jsx)("h1",{className:"text-lg font-bold",children:s})})}},10456:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/action",function(){return t(75690)}])},12293:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var n=t(37876),r=t(7446);let a=()=>(0,n.jsx)(r.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,s,t)=>{"use strict";t.d(s,{X:()=>a});var n=t(76200);class r extends n.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function a(e,s){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new r({value:e});let[t,n="0"]=e.split("."),a=t.startsWith("-");if(a&&(t=t.slice(1)),n=n.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${n}`))&&(t=`${BigInt(t)+1n}`),n="";else if(n.length>s){let[e,r,a]=[n.slice(0,s-1),n.slice(s-1,s),n.slice(s)],l=Math.round(Number(`${r}.${a}`));(n=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>s&&(n=n.slice(1),t=`${BigInt(t)+1n}`),n=n.slice(0,s)}else n=n.padEnd(s,"0");return BigInt(`${a?"-":""}${t}${n}`)}},18651:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var n=t(40854),r=t(37876),a=t(14232),l=t(63934),c=t(83416);let i=e=>{var s=e.initialTimeLeft,t=e.onTick,l=(0,n._)((0,a.useState)(Date.now()+1e3*s),2),c=l[0],i=l[1],o=(0,n._)((0,a.useState)(s),2),d=o[0],x=o[1];(0,a.useEffect)(()=>{i(Date.now()+1e3*s)},[s]),(0,a.useEffect)(()=>{var e=setInterval(()=>{var s=Math.max(0,Math.floor((c-Date.now())/1e3));x(s),t&&t(s),s<=0&&(clearInterval(e),window.location.reload())},1e3);return()=>clearInterval(e)},[c,t]);var u=Math.floor(d/86400),m=Math.floor(d%86400/3600),h=Math.floor(d%3600/60);return(0,r.jsxs)("div",{className:"inline-flex gap-1 text-greyscale-400",children:[u>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":u}})}),"天"]}),(m>0||u>0)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":m}})}),"时"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":h}})}),"分"]}),u<=0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"countdown font-mono",children:(0,r.jsx)("span",{style:{"--value":d%60}})}),"秒"]})]})};var o=t(12293);let d=e=>{var s=e.currentRound,t=e.roundType,d=e.showCountdown,x=(0,l.y)().data,u=(0,a.useContext)(c.N),m=u?u.token:void 0,h=!x||!m||void 0===m.voteOriginBlocks,v=(0,n._)((0,a.useState)(0n),2),j=v[0],f=v[1],N=Number("120")||0,g=Number("259")||0,p=m?Number(m.voteOriginBlocks):0,y=N-(Number(x)-p)%N,b=y>0?Math.ceil(y*g/100):0,w=(0,n._)((0,a.useState)(b),2),I=w[0],A=w[1];(0,a.useEffect)(()=>{if(x){var e=N-(Number(x)-p)%N;A(e>0?Math.ceil(e*g/100):0)}},[x,N,g,p]),(0,a.useEffect)(()=>{s>0n&&f(s)},[s]);var C=null!=j?j.toString():"0";return j<=0n?(0,r.jsx)(r.Fragment,{}):h||null==j||j<0n?((null==j||j<0n)&&(console.log("currentTokenRound",j),console.log("currentRound",s)),(0,r.jsx)(o.A,{})):(0,r.jsx)("div",{className:"flex items-center mb-3",children:(0,r.jsxs)("span",{className:"text-sm text-greyscale-400",children:["( 第",(0,r.jsx)("span",{className:"text-greyscale-400",children:C}),"轮","vote"===t?"投票":"verify"===t?"验证":"行动","阶段，",(0,r.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,r.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(100*I/g)}),(0,r.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===d||d?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i,{initialTimeLeft:b,onTick:A})}):(0,r.jsx)("span",{className:"text-greyscale-400",children:I<60?"".concat(I,"秒"):I<=300?"".concat(Math.floor(I/60),"分钟").concat(I%60,"秒"):I<3600?"".concat(Math.floor(I/60),"分钟"):"".concat(Math.floor(I/3600),"小时").concat(Math.floor(I%3600/60),"分钟")}),(0,r.jsx)("span",{className:"text-greyscale-400",children:" )"})]})})}},42038:(e,s,t)=>{"use strict";t.d(s,{z:()=>a});var n=t(97685),r=t(99090),a=e=>{var s=(()=>{var e,s,t=null==(s=r.$.chains)||null==(e=s[0])?void 0:e.id;if("number"==typeof t)return t;var n=Number("70001");return Number.isFinite(n)?n:void 0})();return!!e&&!!s&&e===s||(n.oR.error("请先将钱包链接 ".concat("Thinkium Mainnet Chain 1")),!1)}},43885:(e,s,t)=>{"use strict";t.d(s,{H:()=>a});var n=t(37876);t(14232);var r=t(54680),a=e=>{var s=e.text;return(0,n.jsx)(n.Fragment,{children:(e=>{if(!e)return e;var s=/(https?:\/\/[^\s]+)/g;if(!s.test(e))return e;var t=e.split(s),a=e.match(s)||[];return(0,n.jsx)(n.Fragment,{children:t.map((e,s)=>{if(s%2==0)return e;var t=a[(s-1)/2];return(0,n.jsx)("a",{href:t,onClick:e=>{e.preventDefault(),r.a.handleExternalLink(t)},className:"text-blue-500 underline hover:text-blue-700",target:"_blank",children:t},s)})})})(s)})}},63934:(e,s,t)=>{"use strict";t.d(s,{y:()=>x});var n=t(5347),r=t(77434),a=t(629),l=t(24751),c=t(56911),i=t(1081),o=t(43387),d=t(79056);function x(e={}){let{query:s={},watch:t}=e,u=(0,o.U)(e),m=(0,n.jE)(),h=(0,i.i)({config:u}),v=e.chainId??h,j=function(e,s={}){return{gcTime:0,async queryFn({queryKey:s}){let{scopeKey:t,...n}=s[1];return await function(e,s={}){let{chainId:t,...n}=s,l=e.getClient({chainId:t});return(0,a.T)(l,r.G,"getBlockNumber")(n)}(e,n)??null},queryKey:function(e={}){return["blockNumber",(0,l.xO)(e)]}(s)}}(u,{...e,chainId:v});return(0,d.r)({...{config:e.config,chainId:e.chainId,..."object"==typeof t?t:{}},enabled:!!((s.enabled??!0)&&("object"==typeof t?t.enabled:t)),onBlockNumber(e){m.setQueryData(j.queryKey,e)}}),(0,c.IT)({...s,...j})}},75690:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var n=t(40854),r=t(37876),a=t(89099),l=t(14232),c=t(29898),i=t(4113),o=t(83416),d=t(60154),x=t(92101),u=t(1709),m=t(8047),h=t(98684),v=t(20442),j=t(12293);let f=e=>{var s=e.currentRound,t=e.actionId,n=e.onRemainingVotesChange,a=((0,l.useContext)(o.N)||{}).token,d=(0,m.F)().address,x=(0,h.$6)(null==a?void 0:a.address,s,d||"",t),u=x.votesNumByAccountByActionId,f=x.isPending,N=x.error,g=(0,c.XC)(null==a?void 0:a.address,s,d||"",t),p=g.scoreByVerifierByActionId,y=g.isPending,b=g.error,w=f||y?BigInt(0):u-p;(0,l.useEffect)(()=>{f||y||(console.log("remainingVotes",w),console.log("isPendingVotesNumByAccount",f),console.log("isPendingScoreByVerifier",y),null==n||n(w))},[w,f,y]);var I=(0,i.g)().handleContractError;return((0,l.useEffect)(()=>{N&&I(N,"vote"),b&&I(b,"verify")},[N,b]),w<=0)?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)("div",{className:"px-4",children:(0,r.jsxs)("div",{className:"text-center bg-greyscale-100 p-4 rounded-lg",children:[(0,r.jsxs)("span",{className:"text-greyscale-800 text-base",children:["我的剩余验证票数：",f||y?(0,r.jsx)(j.A,{}):(0,r.jsx)("span",{className:"text-secondary",children:(0,v.NJ)(w)})]}),(0,r.jsx)("div",{className:"mt-2 text-sm text-greyscale-500 text-center",children:"提示: 您的验证票，将按“打分比例”分配给行动参与者"})]})})};var N=t(18651),g=t(3576),p=t(62701),y=t(6960),b=t(97685),w=t(1081),I=t(42038),A=t(44769),C=t(87577),E=t(99574),k=t(43885),_=t(54680);let B=e=>{var s=e.currentRound,t=e.actionId,d=e.actionInfo,x=e.remainingVotes,u=((0,l.useContext)(o.N)||{}).token,m=(0,w.i)();(0,a.useRouter)();var h=(0,A.Zp)(null==u?void 0:u.address,s,t),f=h.verificationInfos,N=h.isPending,B=h.error,S=(0,n._)((0,l.useState)({}),2),$=S[0],R=S[1],P=(0,n._)((0,l.useState)("0"),2),V=P[0],T=P[1];(0,l.useEffect)(()=>{if(f&&f.length>0){var e={};f.forEach(s=>{e[s.account]=""}),R(e),T("")}},[f]);var M=(()=>{var e=Object.values($).map(e=>parseInt(e)||0),s=parseInt(V)||0,t=e.reduce((e,s)=>e+s,0)+s;if(0===t)return{addressPercentages:{},abstainPercentage:0};var n={};return Object.keys($).forEach(e=>{var s=parseInt($[e])||0;n[e]=s/t*100}),{addressPercentages:n,abstainPercentage:s/t*100}})(),F=M.addressPercentages,O=M.abstainPercentage,K=(0,c.VI)(),D=K.verify,L=K.isPending,q=K.isConfirming,H=K.isConfirmed,z=K.writeError;(0,l.useEffect)(()=>{H&&!z&&(b.oR.success("提交成功",{duration:2e3}),setTimeout(()=>{_.a.reloadWithOverlay()},2e3))},[H,z]);var W=(0,i.g)().handleContractError;return(0,l.useEffect)(()=>{z&&W(z,"verify"),B&&W(B,"dataViewer")},[z,B]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-full max-w-2xl",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{className:"pb-3 text-left text-sm text-greyscale-500",children:"被抽中的行动参与者"}),(0,r.jsx)("th",{className:"pb-3 pl-2 text-left whitespace-nowrap w-20 text-sm text-greyscale-500",children:"打分"}),(0,r.jsx)("th",{className:"pb-3 text-center whitespace-nowrap w-16 text-sm text-greyscale-500",children:"分配"})]})}),(0,r.jsxs)("tbody",{children:[N&&(0,r.jsx)(j.A,{}),f&&f.length>0?f.map((e,s)=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("td",{className:"py-2",children:(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("div",{className:"font-mono",children:(0,r.jsx)(C.A,{address:e.account})}),d&&(0,r.jsx)("div",{className:"text-sm text-greyscale-800",children:d.body.verificationKeys.map((s,t)=>(0,r.jsxs)("div",{children:[s,": ",(0,r.jsx)(k.H,{text:e.infos[t]})]},t))})]})}),(0,r.jsx)("td",{className:"py-2 w-20",children:(0,r.jsxs)("div",{className:"flex items-center text-left",children:[(0,r.jsx)("input",{type:"number",min:"0",value:$[e.account]||"",placeholder:"0",onChange:s=>((e,s)=>{(""===s||/^[0-9]+$/.test(s))&&R((0,p._)((0,g._)({},$),{[e]:s}))})(e.account,s.target.value),className:"w-11 px-1 py-1 border rounded",disabled:L||H}),(0,r.jsx)("span",{className:"text-greyscale-500 text-sm",children:"分"})]})}),(0,r.jsx)("td",{className:"py-2 text-center w-16 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-greyscale-500 text-sm",children:(0,v.Ee)(F[e.account]||0)})})]},e.account)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"text-center py-4",children:"暂无数据"})}),f&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)("div",{className:"text-left",children:(0,r.jsx)("div",{className:"text-sm text-greyscale-800",children:(0,r.jsx)("span",{children:"弃权票数："})})})}),(0,r.jsx)("td",{className:"py-2 w-20",children:(0,r.jsxs)("div",{className:"flex items-center text-left",children:[(0,r.jsx)("input",{type:"number",min:"0",value:V,placeholder:"0",onChange:e=>(e=>{(""===e||/^[0-9]+$/.test(e))&&T(e)})(e.target.value),className:"w-11 px-1 py-1 border rounded",disabled:L||H}),(0,r.jsx)("span",{className:"text-greyscale-500 text-sm",children:"分"})]})}),(0,r.jsx)("td",{className:"py-2 text-center w-16 whitespace-nowrap",children:(0,r.jsx)("div",{className:"text-greyscale-500 text-sm",children:(0,v.Ee)(O)})})]})]})]})}),(0,r.jsxs)(y.$,{onClick:()=>{if((0,I.z)(m)&&(x<=2n?(b.oR.error("剩余票数不足，无法验证"),!1):!Object.values($).every(e=>0===parseInt(e)||""===e)||0!==parseInt(V)&&""!==V||(b.oR.error("请至少给一个地址或弃权投票打分"),!1))){var e=Object.values($).reduce((e,s)=>e+(parseInt(s)||0),0)+(parseInt(V)||0);console.log("-------handleSubmit()-------"),console.log("scoreSum",e);var s=[],n=0n;f.forEach((t,r)=>{var a=parseInt($[t.account])||0,l=BigInt(Math.floor(Number(x)*(a/e)));if((n+=l)>x){var c=n-x;n-=c,s.push(l-c)}else s.push(l)});var r=s.reduce((e,s)=>e+s,0n);if(console.log("remainingVotes",x),console.log("scoresArrayTotal",r),console.log("scoresArrayForSubmit",s),parseInt(V)>0){var a=x>r?x-r:0n;console.log("abstainVotes",a),D(null==u?void 0:u.address,t,a,s)}else{if(r<x){var l=s.findIndex(e=>e>0n);-1!==l&&(s[l]+=x-r)}console.log("abstainVotes",0n),D(null==u?void 0:u.address,t,0n,s)}}},disabled:L||q||H,className:"mt-6 w-1/2",children:[!L&&!q&&!H&&"提交验证",L&&"提交中...",q&&"确认中...",H&&"已验证"]}),(0,r.jsx)(E.A,{isLoading:L||q,text:L?"提交交易...":"确认交易..."})]})};var S=t(30822),$=t(96108);let R=e=>{var s=e.currentRound,t=e.actionId,a=e.actionInfo;e.remainingVotes;var d=((0,l.useContext)(o.N)||{}).token,x=(0,m.F)().address,f=(0,n._)((0,l.useState)(new Set),2),y=f[0],b=f[1],w=(0,c.YZ)(null==d?void 0:d.address,s,t,"0x0000000000000000000000000000000000000000"),I=w.scoreByActionIdByAccount,E=w.isPending,_=w.error,B=(0,A.p$)(null==d?void 0:d.address,s,t),R=B.verifiedAddresses,P=B.isPending,V=B.error,T=(0,A.Zp)(null==d?void 0:d.address,s,t),M=T.verificationInfos,F=T.isPending,O=T.error,K=(0,h.xe)(null==d?void 0:d.address,s,t),D=K.votesNumByActionId,L=(K.isPending,K.error),q=(0,i.g)().handleContractError;(0,l.useEffect)(()=>{V&&q(V,"dataViewer"),O&&q(O,"dataViewer"),_&&q(_,"verify"),L&&q(L,"vote")},[V,O,_,L]);var H=(null==R?void 0:R.reduce((e,s)=>e+s.score,0n))||0n,z=(Number(H)+Number(I||0n))/Number(D||0n)*100;return(0,r.jsxs)("div",{className:"relative px-4 pb-4 w-full",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u.A,{title:"当前轮最新验证结果"}),(0,r.jsxs)("span",{className:"text-sm text-greyscale-500 ml-2",children:["(验证进度：",(0,v.Ee)(z),")"]})]}),(0,r.jsx)("div",{className:"flex justify-left mt-2",children:(0,r.jsx)(N.A,{currentRound:s,roundType:"verify"})}),F||P||E?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(j.A,{})}):M&&0!==M.length?(0,r.jsxs)("table",{className:"table w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,r.jsx)("th",{}),(0,r.jsx)("th",{children:"被抽中地址"}),(0,r.jsx)("th",{className:"px-1 text-right",children:"获得验证票"}),(0,r.jsx)("th",{className:"px-1 text-right",children:"验证票占比"})]})}),(0,r.jsxs)("tbody",{children:[M.map(e=>{var s=null==R?void 0:R.find(s=>s.account===e.account);return(0,p._)((0,g._)({},e),{score:(null==s?void 0:s.score)||0n})}).sort((e,s)=>e.score>s.score?-1:+(e.score<s.score)).map(e=>{var s=null==R?void 0:R.find(s=>s.account===e.account),t=y.has(e.account);return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)("tr",{className:"border-b border-gray-100 ".concat(e.account===x?"text-secondary":""),children:[(0,r.jsx)("td",{className:"px-1 w-8",children:(0,r.jsx)("button",{onClick:()=>(e=>{var s=new Set(y);s.has(e)?s.delete(e):s.add(e),b(s)})(e.account),className:"text-greyscale-400 hover:text-greyscale-600",children:t?(0,r.jsx)(S.A,{size:16}):(0,r.jsx)($.A,{size:16})})}),(0,r.jsx)("td",{className:"px-1",children:(0,r.jsx)(C.A,{address:e.account,showCopyButton:!0,word:e.account===x?"(我)":""})}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,v.$w)((null==s?void 0:s.score)||0n)}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,v.Ee)(Number((null==s?void 0:s.score)||0n)/Number(H||0n)*100)})]}),a&&t&&(0,r.jsxs)("tr",{className:"border-b border-gray-100 bg-gray-50",children:[(0,r.jsx)("td",{}),(0,r.jsx)("td",{colSpan:2,className:"px-1 py-3",children:(0,r.jsxs)("div",{className:"text-sm text-greyscale-600",children:[(0,r.jsx)("div",{className:"text-xs text-greyscale-400 mb-2",children:"验证信息:"}),a.body.verificationKeys.map((s,t)=>(0,r.jsxs)("div",{className:"mb-1",children:[(0,r.jsxs)("span",{className:"text-greyscale-500",children:[s,":"]})," ",(0,r.jsx)(k.H,{text:e.infos[t]})]},t))]})})]})]},e.account)}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-1"}),(0,r.jsx)("td",{className:"px-1 text-greyscale-500",children:"弃权票"}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,v.$w)(I||0n)}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,v.Ee)(Number(I||0n)/Number(H||0n)*100)})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-1"}),(0,r.jsx)("td",{className:"px-1 text-greyscale-500",children:"汇总 "}),(0,r.jsx)("td",{className:"px-1 text-right",children:(0,v.$w)(H||0n)}),(0,r.jsx)("td",{className:"px-1 text-right",children:"100%"})]})]})]}):(0,r.jsx)("div",{className:"text-center text-sm text-greyscale-400 p-4",children:"没有验证地址"})]})},P=()=>{var e=BigInt((0,a.useRouter)().query.id||"0"),s=((0,l.useContext)(o.N)||{}).token,t=(0,c.vC)(),m=t.currentRound,h=t.error,v=(0,i.g)().handleContractError;(0,l.useEffect)(()=>{h&&v(h,"verify")},[h]);var g=(0,n._)((0,l.useState)(BigInt(-1n)),2),p=g[0],y=g[1];console.log("remainingVotes",p);var b=(0,n._)((0,l.useState)(void 0),2),w=b[0],I=b[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{title:"验证",backUrl:"/verify/actions/?symbol=".concat(null==s?void 0:s.symbol)}),(0,r.jsxs)("main",{className:"flex-grow",children:[p>0&&(0,r.jsxs)("div",{className:"px-4 pt-4",children:[(0,r.jsx)(u.A,{title:"请分配您的验证票："}),(0,r.jsx)(N.A,{currentRound:m,roundType:"verify",showCountdown:!1})]}),(0,r.jsx)(f,{currentRound:m,actionId:e,onRemainingVotesChange:function(e){y(e)}}),(0,r.jsxs)("div",{className:"flex flex-col items-center p-4",children:[p>1n&&(0,r.jsx)(B,{currentRound:m,actionId:e,actionInfo:w,remainingVotes:p}),p>=0n&&p<=1n&&(0,r.jsx)(R,{currentRound:m,actionId:e,actionInfo:w,remainingVotes:p}),p<0n&&(0,r.jsx)(j.A,{})]}),(0,r.jsx)(x.A,{actionId:e,round:BigInt(m||0),showSubmitter:!0,onActionInfo:I})]})]})}},79056:(e,s,t)=>{"use strict";t.d(s,{r:()=>i});var n=t(84194),r=t(629),a=t(14232),l=t(1081),c=t(43387);function i(e={}){let{enabled:s=!0,onBlockNumber:t,config:o,...d}=e,x=(0,c.U)(e),u=(0,l.i)({config:x}),m=e.chainId??u;(0,a.useEffect)(()=>{if(s&&t)return function(e,s){let t,a,{syncConnectedChain:l=e._internal.syncConnectedChain,...c}=s,i=s=>{t&&t();let a=e.getClient({chainId:s});return t=(0,r.T)(a,n.q,"watchBlockNumber")(c)},o=i(s.chainId);return l&&!s.chainId&&(a=e.subscribe(({chainId:e})=>e,async e=>i(e))),()=>{o?.(),a?.()}}(x,{...d,chainId:m,onBlockNumber:t})},[m,x,s,t,d.onError,d.emitMissed,d.emitOnBegin,d.poll,d.pollingInterval,d.syncConnectedChain])}},87577:(e,s,t)=>{"use strict";t.d(s,{A:()=>x});var n=t(40854),r=t(37876),a=t(14232),l=t(48447),c=t(33276),i=t(70801),o=t(97685),d=t(20442);let x=e=>{var s=e.address,t=e.word,x=e.showCopyButton,u=e.showAddress,m=void 0===u||u,h=e.colorClassName,v=void 0===h?"":h,j=e.colorClassName2,f=void 0===j?"":j,N=(0,n._)((0,a.useState)(!1),2),g=N[0],p=N[1];return(0,r.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[t&&(0,r.jsx)("span",{className:"text-xs",children:t}),m&&!f&&(0,r.jsx)("span",{className:"font-mono text-xs ".concat(null!=v?v:"text-greyscale-500"),children:(0,d.W_)(s)}),m&&f&&(0,r.jsxs)("span",{className:"text-[0px]",children:[(0,r.jsx)("span",{className:"font-mono text-xs ".concat(null!=v?v:"text-greyscale-500"),children:"".concat(s.substring(0,6),"...")}),(0,r.jsx)("span",{className:"font-mono text-xs ".concat(f),children:"".concat(s.substring(s.length-4))})]}),(void 0===x||x)&&(0,r.jsx)(l.CopyToClipboard,{text:s,onCopy:(e,s)=>{s?p(!0):o.Ay.error("复制失败")},children:(0,r.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:g?(0,r.jsx)(c.A,{className:"h-4 w-4 ".concat(null!=v?v:"text-greyscale-500")}):(0,r.jsx)(i.A,{className:"h-4 w-4 ".concat(null!=v?v:"text-greyscale-500")})})})]})}},92101:(e,s,t)=>{"use strict";t.d(s,{A:()=>j});var n=t(37876),r=t(14232),a=t(6960),l=t(48230),c=t.n(l),i=t(64115),o=t(4113),d=t(83416),x=t(20442),u=t(43885),m=t(87577),h=t(12293),v=t(1709);let j=e=>{var s=e.actionId,t=e.round,l=e.showSubmitter,j=e.showVerifyHistory,f=e.onActionInfo,N=((0,r.useContext)(d.N)||{}).token,g=(0,i.Y4)(null==N?void 0:N.address,s),p=g.actionInfo,y=g.isPending,b=g.error;(0,r.useEffect)(()=>{f&&p&&f(p)},[p]);var w=(0,i.WC)(null==N?void 0:N.address,l?t:0n,s),I=w.submitInfo,A=w.isPending,C=w.error,E=(null==I?void 0:I.submitter)||"N/A",k=(0,o.g)().handleContractError;return((0,r.useEffect)(()=>{b&&k(b,"submit"),C&&k(C,"submit")},[b,C]),y)?(0,n.jsx)(h.A,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mx-auto p-4 pb-2 border-t border-greyscale-100",children:(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)(v.A,{title:"行动详情"}),(void 0===j||j)&&(0,n.jsx)(a.$,{variant:"link",className:"text-secondary border-secondary",asChild:!0,children:(0,n.jsx)(c(),{href:"/my/actrewards/?id=".concat(s,"&symbol=").concat(null==N?void 0:N.symbol),children:"查看铸造激励 >>"})})]})}),(0,n.jsxs)("div",{className:"mx-auto p-4 pb-2 ",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("span",{className:"text-sm text-greyscale-500",children:["No.",null==p?void 0:p.head.id.toString()]}),(0,n.jsx)("span",{className:"text-xl font-bold text-black",children:null==p?void 0:p.body.title})]}),(0,n.jsxs)("div",{className:"mt-0 text-xs text-greyscale-500 flex justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:["创建人 ",(0,n.jsx)(m.A,{address:null==p?void 0:p.head.author})]}),l&&(0,n.jsxs)("div",{className:"flex items-center",children:["推举人"," ",A?(0,n.jsx)(h.A,{}):(0,n.jsx)(m.A,{address:E})]})]})]}),(0,n.jsx)("div",{className:"mx-auto p-4 pb-2",children:(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最小参与代币数"}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(0,x.NJ)((null==p?void 0:p.body.minStake)||BigInt(0))})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"最大抽取验证地址数"}),(0,n.jsx)("p",{className:"text-greyscale-500",children:(null==p?void 0:p.body.maxRandomAccounts.toString())||"-"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"验证规则"}),(0,n.jsx)("p",{className:"text-greyscale-500 whitespace-pre-wrap",children:(0,n.jsx)(u.H,{text:null==p?void 0:p.body.verificationRule})})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"报名参加行动时，行动者要提供的信息"}),(null==p?void 0:p.body.verificationKeys)&&(null==p?void 0:p.body.verificationKeys.length)>0?(0,n.jsx)("ul",{className:"list-disc pl-5",children:p.body.verificationKeys.map((e,s)=>(0,n.jsxs)("li",{className:"text-greyscale-500",children:[e," : ",p.body.verificationInfoGuides[s]]},s))}):(0,n.jsx)("span",{className:"text-greyscale-500",children:"无"})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-sm font-bold",children:"白名单"}),(0,n.jsx)("p",{className:"text-greyscale-500 flex flex-wrap items-center",children:(null==p?void 0:p.body.whiteListAddress)&&"0x0000000000000000000000000000000000000000"!==p.body.whiteListAddress?(0,n.jsx)("span",{className:"flex items-center mr-2",children:(0,n.jsx)(m.A,{address:p.body.whiteListAddress})}):"无限制"})]})]})})]})}}},e=>{e.O(0,[3308,7460,8230,154,5498,4769,4115,9898,636,6593,8792],()=>e(e.s=10456)),_N_E=e.O()}]);