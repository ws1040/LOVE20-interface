(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8245],{11372:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>A});var r=s(37876),t=s(60154),n=s(16927),l=s(3576),d=s(62701),i=s(40854),o=s(4902),c=s(22442),m=s(13810),u=s(88992),f=s(8047),x=s(1081),N=s(89099),p=s(14232),v=s(97685),h=s(77932),g=s(6960),j=s(13816),_=s(28638),b=s(92659),y=s(42038),w=s(20442),C=s(65575),R=s(40752),I=s(62288),F=s(4113),$=s(83416),E=s(12293),k=s(99574),B=c.Ik({symbol:c.Yj().nonempty("请输入代币符号").length(6,"代币符号必须是 6 个字符").regex(/^[A-Z0-9]+$/,"只能使用大写字母 A~Z 和数字 0~9").regex(/^[A-Z]/,"必须以大写字母 A~Z 开头")});function M(){var e=(0,N.useRouter)(),a=((0,p.useContext)($.N)||{}).token,s=(0,f.F)().address,t=(0,x.i)(),c=(0,i._)((0,p.useState)(""),2),M=c[0],A=c[1],L=(0,R.O2)(),Z=L.launchToken,S=L.isPending,T=L.writeError,z=L.isConfirming,D=L.isConfirmed,O=(0,R.Of)(a?a.address:"0x0000000000000000000000000000000000000000",s),P=O.remainingLaunchCount,J=O.isPending,V=(0,I.MZ)(a?a.address:"0x0000000000000000000000000000000000000000",s),W=V.numOfMintGovRewardByAccount,X=V.isPending,Y=Number("2")||180n,G=Number(Y)-Number(null!=W?W:0)%Number(Y),H=(0,F.g)().handleContractError;(0,p.useEffect)(()=>{T&&H(T,"launch")},[T,H]);var U=(0,u.mN)({resolver:(0,m.u)(B),defaultValues:{symbol:""}});(0,p.useEffect)(()=>{D&&e.push("/launch/?symbol=".concat("Test").concat(M))},[D,e,M]);var Q=(0,i._)((0,p.useState)(!1),2),q=Q[0],K=Q[1],ee=(0,i._)((0,p.useState)(null),2),ea=ee[0],es=ee[1];if(!a||J||X)return(0,r.jsx)(E.A,{});var er=S||z;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_.Zp,{className:"w-full border-none shadow-none rounded-none",children:[(0,r.jsxs)(_.aR,{children:[(0,r.jsx)(_.ZB,{className:"text-2xl font-bold text-center",children:"开启子币公平发射"}),(0,r.jsxs)(_.BT,{className:"text-center",children:["创建 ",(0,r.jsx)("span",{className:"text-secondary",children:a.symbol})," 的子币"]})]}),(0,r.jsx)(b.lV,(0,d._)((0,l._)({},U),{children:(0,r.jsxs)("form",{onSubmit:U.handleSubmit(function(e){return(0,n._)(function(){return(0,o.YH)(this,function(s){switch(s.label){case 0:if(!(0,y.z)(t))return v.oR.error("请切换到正确的网络"),[2];s.label=1;case 1:return s.trys.push([1,4,,5]),[4,new Promise((e,a)=>{es({resolve:e,reject:a}),K(!0)})];case 2:if(!s.sent())return[2];return A(e.symbol),[4,Z(e.symbol,null==a?void 0:a.address)];case 3:return s.sent(),[3,5];case 4:return console.error(s.sent()),[3,5];case 5:return[2]}})})()}),children:[(0,r.jsx)(_.Wu,{className:"space-y-4",children:(0,r.jsx)(b.zB,{control:U.control,name:"symbol",render:e=>{var a=e.field;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{children:"子币符号："}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(h.p,(0,l._)({id:"symbol",placeholder:"例如: TENNIS, FOOTBALL",disabled:er||D,className:"!ring-secondary-foreground"},a))}),(0,r.jsx)(b.Rr,{children:"只能用大写字母A~Z和数字0~9，最多 6 个字符。"}),(0,r.jsx)(b.C5,{})]})}})}),(0,r.jsx)(_.wL,{className:"flex justify-center",children:(0,r.jsx)(g.$,{className:"w-1/2",type:"submit",disabled:er||D,children:S?"提交中...":z?"确认中...":D?"提交成功":"提交"})})]})})),(0,r.jsx)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-0 m-6",children:(0,r.jsxs)("p",{children:["公平发射募集目标：",(0,w.NJ)((0,C.oQ)("20000000000000000000000000")),"个"," ",null==a?void 0:a.symbol]})})]}),(0,r.jsx)(k.A,{isLoading:er,text:S?"提交交易...":"确认交易..."}),(0,r.jsx)(j.lG,{open:q,onOpenChange:e=>{e||(null==ea||ea.resolve(!1),es(null)),K(e)},children:(0,r.jsxs)(j.Cf,{children:[(0,r.jsxs)(j.c7,{children:[(0,r.jsx)(j.L3,{children:"确认开启子币发射"}),(0,r.jsxs)(j.rr,{children:["剩余可发射次数：",Number(P)," 次",(0,r.jsx)("br",{}),"再完成 ",G," 次治理奖励铸币，可增加1次"]})]}),(0,r.jsxs)(j.Es,{children:[(0,r.jsx)(g.$,{variant:"outline",onClick:()=>{K(!1),null==ea||ea.resolve(!1),es(null)},children:"取消"}),(0,r.jsx)(g.$,{onClick:()=>{K(!1),null==ea||ea.resolve(!0),es(null)},children:"确认"})]})]})})]})}function A(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.A,{title:"开启子币"}),(0,r.jsx)("main",{className:"flex-grow",children:(0,r.jsx)(M,{})})]})}},13816:(e,a,s)=>{"use strict";s.d(a,{Cf:()=>N,Es:()=>v,L3:()=>h,c7:()=>p,lG:()=>m,rr:()=>g,zM:()=>u});var r=s(3576),t=s(62701),n=s(65699),l=s(37876),d=s(14232),i=s(26303),o=s(70672),c=s(30684),m=i.bL,u=i.l9,f=i.ZL;i.bm;var x=d.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(i.hJ,(0,r._)({ref:a,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},t))});x.displayName=i.hJ.displayName;var N=d.forwardRef((e,a)=>{var s=e.className,d=e.children,m=(0,n._)(e,["className","children"]);return(0,l.jsxs)(f,{children:[(0,l.jsx)(x,{}),(0,l.jsxs)(i.UC,(0,t._)((0,r._)({ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},m),{children:[d,(0,l.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(o.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});N.displayName=i.UC.displayName;var p=e=>{var a=e.className,s=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a)},s))};p.displayName="DialogHeader";var v=e=>{var a=e.className,s=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},s))};v.displayName="DialogFooter";var h=d.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(i.hE,(0,r._)({ref:a,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",s)},t))});h.displayName=i.hE.displayName;var g=d.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(i.VY,(0,r._)({ref:a,className:(0,c.cn)("text-sm text-muted-foreground",s)},t))});g.displayName=i.VY.displayName},18449:(e,a,s)=>{"use strict";s.d(a,{X:()=>n});var r=s(76200);class t extends r.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,a){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new t({value:e});let[s,r="0"]=e.split("."),n=s.startsWith("-");if(n&&(s=s.slice(1)),r=r.replace(/(0+)$/,""),0===a)1===Math.round(Number(`.${r}`))&&(s=`${BigInt(s)+1n}`),r="";else if(r.length>a){let[e,t,n]=[r.slice(0,a-1),r.slice(a-1,a),r.slice(a)],l=Math.round(Number(`${t}.${n}`));(r=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>a&&(r=r.slice(1),s=`${BigInt(s)+1n}`),r=r.slice(0,a)}else r=r.padEnd(a,"0");return BigInt(`${n?"-":""}${s}${r}`)}},28638:(e,a,s)=>{"use strict";s.d(a,{BT:()=>m,Wu:()=>u,ZB:()=>c,Zp:()=>i,aR:()=>o,wL:()=>f});var r=s(3576),t=s(65699),n=s(37876),l=s(14232),d=s(30684),i=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},l))});i.displayName="Card";var o=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",s)},l))});o.displayName="CardHeader";var c=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",s)},l))});c.displayName="CardTitle";var m=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("text-sm text-muted-foreground",s)},l))});m.displayName="CardDescription";var u=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("p-6 pt-0",s)},l))});u.displayName="CardContent";var f=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("flex items-center p-6 pt-0",s)},l))});f.displayName="CardFooter"},42038:(e,a,s)=>{"use strict";s.d(a,{z:()=>n});var r=s(97685),t=s(99090),n=e=>{var a=(()=>{var e,a,s=null==(a=t.$.chains)||null==(e=a[0])?void 0:e.id;if("number"==typeof s)return s;var r=Number("70001");return Number.isFinite(r)?r:void 0})();return!!e&&!!a&&e===a||(r.oR.error("请先将钱包链接 ".concat("Thinkium Mainnet Chain 1")),!1)}},61720:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch/deploy",function(){return s(11372)}])},92659:(e,a,s)=>{"use strict";s.d(a,{lV:()=>p,MJ:()=>y,Rr:()=>w,zB:()=>h,eI:()=>_,lR:()=>b,C5:()=>C});var r=s(81110),t=s(40120),n=s(3576),l=s(62701),d=s(65699),i=s(37876),o=s(14232),c=s(82987),m=s(88992),u=s(30684),f=s(59773),x=(0,s(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=o.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]);return(0,i.jsx)(f.b,(0,n._)({ref:a,className:(0,u.cn)(x(),s)},r))});N.displayName=f.b.displayName;var p=m.Op,v=o.createContext({}),h=e=>{var a=(0,r._)({},(0,t._)(e));return(0,i.jsx)(v.Provider,{value:{name:a.name},children:(0,i.jsx)(m.xI,(0,n._)({},a))})},g=()=>{var e=o.useContext(v),a=o.useContext(j),s=(0,m.xW)(),r=s.getFieldState,t=s.formState,l=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");var d=a.id;return(0,n._)({id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message")},l)},j=o.createContext({}),_=o.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]),t=o.useId();return(0,i.jsx)(j.Provider,{value:{id:t},children:(0,i.jsx)("div",(0,n._)({ref:a,className:(0,u.cn)("space-y-2",s)},r))})});_.displayName="FormItem";var b=o.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]),t=g(),l=t.error,o=t.formItemId;return(0,i.jsx)(N,(0,n._)({ref:a,className:(0,u.cn)(l&&"text-destructive",s),htmlFor:o},r))});b.displayName="FormLabel";var y=o.forwardRef((e,a)=>{var s=(0,r._)({},(0,t._)(e)),l=g(),d=l.error,o=l.formItemId,m=l.formDescriptionId,u=l.formMessageId;return(0,i.jsx)(c.DX,(0,n._)({ref:a,id:o,"aria-describedby":d?"".concat(m," ").concat(u):"".concat(m),"aria-invalid":!!d},s))});y.displayName="FormControl";var w=o.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]),t=g().formDescriptionId;return(0,i.jsx)("p",(0,n._)({ref:a,id:t,className:(0,u.cn)("text-sm text-muted-foreground",s)},r))});w.displayName="FormDescription";var C=o.forwardRef((e,a)=>{var s=e.className,r=e.children,t=(0,d._)(e,["className","children"]),o=g(),c=o.error,m=o.formMessageId,f=c?String(null==c?void 0:c.message):r;return f?(0,i.jsx)("p",(0,l._)((0,n._)({ref:a,id:m,className:(0,u.cn)("text-sm font-medium text-destructive",s)},t),{children:f})):null});C.displayName="FormMessage"}},e=>{e.O(0,[3308,7460,9985,154,5498,3356,2288,636,6593,8792],()=>e(e.s=61720)),_N_E=e.O()}]);