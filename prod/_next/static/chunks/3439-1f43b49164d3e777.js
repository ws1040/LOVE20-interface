"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3439],{12293:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(37876),s=n(7446);let r=()=>(0,a.jsx)(s.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,t,n)=>{n.d(t,{X:()=>r});var a=n(76200);class s extends a.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function r(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new s({value:e});let[n,a="0"]=e.split("."),r=n.startsWith("-");if(r&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){let[e,s,r]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],i=Math.round(Number(`${s}.${r}`));(a=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${r?"-":""}${n}${a}`)}},75695:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(16927),s=n(40854),r=n(4902),i=n(37876),l=n(14232),u=n(7446),d=n(95167),c=n(8047),o=n(44571),p=n(97685);function y(e){var t=e.tokenAddress,n=e.tokenSymbol,y=e.tokenDecimals,m=e.tokenImage,x=(0,s._)((0,l.useState)(!1),2),T=x[0],b=x[1],N=(0,c.F)().isConnected,f=(0,o.G)().data;return n.length>11?null:(0,i.jsx)("button",{onClick:()=>(0,a._)(function(){return(0,r.YH)(this,function(e){switch(e.label){case 0:if(!N)return alert("请先连接你的钱包"),[2];b(!0),e.label=1;case 1:if(e.trys.push([1,3,4,5]),!f)return alert("无法获取钱包客户端"),[2];return[4,f.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:t,symbol:n,decimals:y,image:m}}})];case 2:return e.sent()?p.Ay.success("代币已成功添加到 MetaMask 钱包"):p.Ay.error("用户拒绝添加代币"),[3,5];case 3:return console.error("添加代币失败:",e.sent()),p.Ay.error("添加代币失败，请检查控制台以获取更多信息"),[3,5];case 4:return b(!1),[7];case 5:return[2]}})})(),disabled:T,className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",children:T?(0,i.jsx)(u.A,{className:"h-4 w-4 animate-spin"}):(0,i.jsx)(d.A,{className:"h-4 w-4 text-greyscale-500"})})}},80693:(e,t,n)=>{n.d(t,{lW:()=>x,qX:()=>T,S1:()=>b});var a=n(16927),s=n(40854),r=n(4902),i=n(14232),l=n(75569),u=n(40162),d=n(81675),c=n(1160),o=n(99090),p=[{type:"fallback",stateMutability:"payable"},{type:"function",name:"allowance",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"guy",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{name:"",type:"uint8",internalType:"uint8"}],stateMutability:"view"},{type:"function",name:"deposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"src",type:"address",internalType:"address"},{name:"dst",type:"address",internalType:"address"},{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"wad",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"guy",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposit",inputs:[{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"dst",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawal",inputs:[{name:"src",type:"address",indexed:!0,internalType:"address"},{name:"wad",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],y=n(65575),m=n(99742).env.NEXT_PUBLIC_CONTRACT_ADDRESS_ROOT_PARENT_TOKEN,x=(e,t)=>{var n=(0,l.Q)({address:e,abi:p,functionName:"balanceOf",args:[t],query:{enabled:!!e&&!!t}}),a=n.data,s=n.isPending,r=n.error;return{balance:a?(0,y.oQ)(a):void 0,isPending:s,error:r}},T=()=>{var e=(0,s._)((0,i.useState)(!1),2),t=e[0],n=e[1],l=(0,s._)((0,i.useState)(null),2),y=l[0],x=l[1],T=(0,s._)((0,i.useState)(),2),b=T[0],N=T[1],f=(0,u.g)({hash:b});return{deposit:e=>(0,a._)(function(){return(0,r.YH)(this,function(t){switch(t.label){case 0:n(!0),x(null),t.label=1;case 1:return t.trys.push([1,4,5,6]),[4,(0,d.v)(o.$,{address:m,abi:p,functionName:"deposit",args:[],value:e})];case 2:return t.sent(),[4,(0,c.E)(o.$,{address:m,abi:p,functionName:"deposit",args:[],value:e})];case 3:return N(t.sent()),[3,6];case 4:return x(t.sent()),[3,6];case 5:return n(!1),[7];case 6:return[2]}})})(),isPending:t,isConfirming:f.isLoading,writeError:y,isConfirmed:f.isSuccess}},b=()=>{var e=(0,s._)((0,i.useState)(!1),2),t=e[0],n=e[1],l=(0,s._)((0,i.useState)(null),2),y=l[0],x=l[1],T=(0,s._)((0,i.useState)(),2),b=T[0],N=T[1],f=(0,u.g)({hash:b});return{withdraw:e=>(0,a._)(function(){return(0,r.YH)(this,function(t){switch(t.label){case 0:n(!0),x(null),t.label=1;case 1:return t.trys.push([1,4,5,6]),[4,(0,d.v)(o.$,{address:m,abi:p,functionName:"withdraw",args:[e]})];case 2:return t.sent(),[4,(0,c.E)(o.$,{address:m,abi:p,functionName:"withdraw",args:[e]})];case 3:return N(t.sent()),[3,6];case 4:return x(t.sent()),[3,6];case 5:return n(!1),[7];case 6:return[2]}})})(),isPending:t,isConfirming:f.isLoading,writeError:y,isConfirmed:f.isSuccess}}},82695:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(37876),s=n(14232),r=n(8047),i=n(20442),l=n(80693),u=n(4113),d=n(87577),c=n(75695),o=n(12293),p=n(99742);function y(){var e=(0,r.F)().address,t=(0,l.lW)(p.env.NEXT_PUBLIC_CONTRACT_ADDRESS_ROOT_PARENT_TOKEN||"",e||"0x0000000000000000000000000000000000000000"),n=t.balance,y=t.isPending,m=t.error,x=(0,u.g)().handleContractError;return(0,s.useEffect)(()=>{m&&x(m,"token")},[m]),(0,a.jsx)("div",{className:"px-4 pt-0 pb-6",children:(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4 text-sm mt-4",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"mr-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-bold text-2xl mr-2",children:p.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL}),(0,a.jsx)(d.A,{address:p.env.NEXT_PUBLIC_CONTRACT_ADDRESS_ROOT_PARENT_TOKEN}),(0,a.jsx)(c.A,{tokenAddress:p.env.NEXT_PUBLIC_CONTRACT_ADDRESS_ROOT_PARENT_TOKEN,tokenSymbol:p.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL||"",tokenDecimals:Number(p.env.NEXT_PUBLIC_TOKEN_DECIMALS)||0})]})})}),(0,a.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,a.jsx)("span",{className:"text-sm text-greyscale-500 mr-1",children:"我持有:"}),(0,a.jsx)("span",{className:"text-sm text-secondary",children:y?(0,a.jsx)(o.A,{}):(0,i.NJ)(n||0n)})]})]})})}},87577:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(40854),s=n(37876),r=n(14232),i=n(48447),l=n(33276),u=n(70801),d=n(97685),c=n(20442);let o=e=>{var t=e.address,n=e.word,o=e.showCopyButton,p=e.showAddress,y=void 0===p||p,m=e.colorClassName,x=void 0===m?"":m,T=e.colorClassName2,b=void 0===T?"":T,N=(0,a._)((0,r.useState)(!1),2),f=N[0],h=N[1];return(0,s.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[n&&(0,s.jsx)("span",{className:"text-xs",children:n}),y&&!b&&(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=x?x:"text-greyscale-500"),children:(0,c.W_)(t)}),y&&b&&(0,s.jsxs)("span",{className:"text-[0px]",children:[(0,s.jsx)("span",{className:"font-mono text-xs ".concat(null!=x?x:"text-greyscale-500"),children:"".concat(t.substring(0,6),"...")}),(0,s.jsx)("span",{className:"font-mono text-xs ".concat(b),children:"".concat(t.substring(t.length-4))})]}),(void 0===o||o)&&(0,s.jsx)(i.CopyToClipboard,{text:t,onCopy:(e,t)=>{t?h(!0):d.Ay.error("复制失败")},children:(0,s.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:f?(0,s.jsx)(l.A,{className:"h-4 w-4 ".concat(null!=x?x:"text-greyscale-500")}):(0,s.jsx)(u.A,{className:"h-4 w-4 ".concat(null!=x?x:"text-greyscale-500")})})})]})}},95167:(e,t,n)=>{n.d(t,{A:()=>a});var a=(0,n(11713).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])}}]);