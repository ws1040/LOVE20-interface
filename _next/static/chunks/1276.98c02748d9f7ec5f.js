"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1276],{42038:(e,r,s)=>{s.d(r,{z:()=>l});var n=s(97685),a=s(99090),t=s(99742),l=e=>{var r,s=(()=>{var e,r,s=null==(r=a.$.chains)||null==(e=r[0])?void 0:e.id;if("number"==typeof s)return s;var n=Number(t.env.NEXT_PUBLIC_CHAIN_ID);return Number.isFinite(n)?n:void 0})();return!!e&&!!s&&e===s||(n.oR.error("请先将钱包链接 ".concat(null!=(r=t.env.NEXT_PUBLIC_CHAIN_NAME)?r:t.env.NEXT_PUBLIC_CHAIN)),!1)}},51276:(e,r,s)=>{s.r(r),s.d(r,{default:()=>P});var n=s(16927),a=s(3576),t=s(62701),l=s(4902),o=s(37876),i=s(14232),d=s(89099),c=s(22442),m=s(13810),u=s(88992),f=s(8047),v=s(1081),N=s(57238),_=s(6960),x=s(77932),h=s(92659),p=s(97685),b=s(48230),y=s.n(b),j=s(42038),I=s(20442),E=s(80693),T=s(9215),C=s(4113),R=s(25239),g=s(83416),w=s(1709),A=s(12293),S=s(99574),F=s(99742);let P=()=>{let e;var r=(0,d.useRouter)(),s=(0,f.F)().address,b=(0,v.i)(),P=((0,i.useContext)(g.N)||{}).token,k=(0,N.A)({address:s}),L=k.data,B=k.error,O=k.isLoading,X=(0,T.lW)(F.env.NEXT_PUBLIC_CONTRACT_ADDRESS_ROOT_PARENT_TOKEN,s),M=(X.balance,X.isPending),U=X.error,D=(0,E.qX)(),Y=D.deposit,K=D.isPending,z=D.isConfirming,H=D.isConfirmed,J=D.writeError,V=(0,u.mN)({resolver:(0,m.u)((e=(null==L?void 0:L.value)||0n,c.Ik({depositAmount:c.Yj().nonempty("请输入兑换数量").refine(r=>{try{var s=(0,I.XS)(r);return s>0n&&s<=e}catch(e){return!1}},{message:"兑换数量必须大于0且不超过您的余额"})}))),defaultValues:{depositAmount:""},mode:"onChange"}),$=(0,R.q)().setError;(0,i.useEffect)(()=>{H&&(p.oR.success("兑换成功"),$(null),setTimeout(()=>{P&&!P.hasEnded?P.parentTokenSymbol===F.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL?window.location.href="".concat("/interface","/launch/contribute/?symbol=").concat(P.symbol):r.back():P&&!P.initialStakeRound?window.location.href="".concat("/interface","/gov/stakelp/?symbol=").concat(P.symbol,"&first=true"):r.back()},2e3))},[H,r]);var W=()=>{V.setValue("depositAmount",(0,I.Js)((null==L?void 0:L.value)||0n))},q=(0,C.g)().handleContractError;return((0,i.useEffect)(()=>{B&&q(B,"token"),U&&q(U,"token"),J&&q(J,"token")},[B,U,J,q]),O||M)?(0,o.jsx)(A.A,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"p-6 pt-0",children:[(0,o.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,o.jsx)(w.A,{title:"存入".concat(null==L?void 0:L.symbol," 换取 ").concat(F.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL)}),(0,o.jsx)(_.$,{variant:"link",className:"text-secondary border-secondary m-0 p-0",asChild:!0,children:(0,o.jsxs)(y(),{href:"/dex/withdraw?symbol=".concat(null==P?void 0:P.symbol),children:["提现 ",null==L?void 0:L.symbol]})})]}),(0,o.jsx)(h.lV,(0,t._)((0,a._)({},V),{children:(0,o.jsxs)("form",{onSubmit:V.handleSubmit(function(e){return(0,n._)(function(){return(0,l.YH)(this,function(r){switch(r.label){case 0:if(!(0,j.z)(b))return p.oR.error("请切换到正确的网络"),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Y((0,I.XS)(e.depositAmount))];case 2:return r.sent(),[3,4];case 3:return console.error(r.sent()),[3,4];case 4:return[2]}})})()}),className:"space-y-4",children:[(0,o.jsx)(h.zB,{control:V.control,name:"depositAmount",render:e=>{var r,s=e.field;return(0,o.jsxs)(h.eI,{children:[(0,o.jsx)(h.lR,{children:"存入数量："}),(0,o.jsx)(h.MJ,{children:(0,o.jsx)(x.p,(0,a._)({placeholder:"填写 ".concat(null!=(r=null==L?void 0:L.symbol)?r:""," 数量"),type:"number",disabled:K||z,className:"!ring-secondary-foreground"},s))}),(0,o.jsx)(h.C5,{}),(0,o.jsxs)(h.Rr,{className:"flex items-center justify-between",children:[(0,o.jsxs)("span",{children:["共 ",O?(0,o.jsx)(A.A,{}):(0,I.NJ)((null==L?void 0:L.value)||0n)," ",null==L?void 0:L.symbol]}),(0,o.jsx)(_.$,{type:"button",variant:"link",size:"sm",onClick:W,className:"text-secondary p-0 ml-2",disabled:O||K||z,children:"全部"})]})]})}}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(_.$,{type:"submit",className:"w-1/2 text-white py-2 rounded-lg",disabled:K||z||H,children:K?"存入中...":z?"确认中...":H?"存入成功":"存入"})}),(0,o.jsx)("div",{className:"flex justify-center mb-2",children:(0,o.jsxs)("span",{className:"text-sm",children:["兑换比例：1 ",F.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL," = 1 ",null==L?void 0:L.symbol]})})]})}))]}),(0,o.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-0 m-6",children:[(0,o.jsx)("p",{className:"mb-1",children:"说明："}),(0,o.jsxs)("p",{children:["1. ",F.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL," 是用 WETH9 协议，将 ",null==L?void 0:L.symbol," 包装的符合 ERC20 协议的代币"]}),(0,o.jsxs)("p",{children:["2. 存入的 ",null==L?void 0:L.symbol," 会被协议锁定，随时可以通过提现功能，将"," ",F.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL," 转回 ",null==L?void 0:L.symbol]})]}),(0,o.jsx)(S.A,{isLoading:K||z,text:K?"提交交易...":"确认交易..."})]})}},92659:(e,r,s)=>{s.d(r,{lV:()=>_,MJ:()=>I,Rr:()=>E,zB:()=>h,eI:()=>y,lR:()=>j,C5:()=>T});var n=s(81110),a=s(40120),t=s(3576),l=s(62701),o=s(65699),i=s(37876),d=s(14232),c=s(82987),m=s(88992),u=s(30684),f=s(59773),v=(0,s(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=d.forwardRef((e,r)=>{var s=e.className,n=(0,o._)(e,["className"]);return(0,i.jsx)(f.b,(0,t._)({ref:r,className:(0,u.cn)(v(),s)},n))});N.displayName=f.b.displayName;var _=m.Op,x=d.createContext({}),h=e=>{var r=(0,n._)({},(0,a._)(e));return(0,i.jsx)(x.Provider,{value:{name:r.name},children:(0,i.jsx)(m.xI,(0,t._)({},r))})},p=()=>{var e=d.useContext(x),r=d.useContext(b),s=(0,m.xW)(),n=s.getFieldState,a=s.formState,l=n(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");var o=r.id;return(0,t._)({id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message")},l)},b=d.createContext({}),y=d.forwardRef((e,r)=>{var s=e.className,n=(0,o._)(e,["className"]),a=d.useId();return(0,i.jsx)(b.Provider,{value:{id:a},children:(0,i.jsx)("div",(0,t._)({ref:r,className:(0,u.cn)("space-y-2",s)},n))})});y.displayName="FormItem";var j=d.forwardRef((e,r)=>{var s=e.className,n=(0,o._)(e,["className"]),a=p(),l=a.error,d=a.formItemId;return(0,i.jsx)(N,(0,t._)({ref:r,className:(0,u.cn)(l&&"text-destructive",s),htmlFor:d},n))});j.displayName="FormLabel";var I=d.forwardRef((e,r)=>{var s=(0,n._)({},(0,a._)(e)),l=p(),o=l.error,d=l.formItemId,m=l.formDescriptionId,u=l.formMessageId;return(0,i.jsx)(c.DX,(0,t._)({ref:r,id:d,"aria-describedby":o?"".concat(m," ").concat(u):"".concat(m),"aria-invalid":!!o},s))});I.displayName="FormControl";var E=d.forwardRef((e,r)=>{var s=e.className,n=(0,o._)(e,["className"]),a=p().formDescriptionId;return(0,i.jsx)("p",(0,t._)({ref:r,id:a,className:(0,u.cn)("text-sm text-muted-foreground",s)},n))});E.displayName="FormDescription";var T=d.forwardRef((e,r)=>{var s=e.className,n=e.children,a=(0,o._)(e,["className","children"]),d=p(),c=d.error,m=d.formMessageId,f=c?String(null==c?void 0:c.message):n;return f?(0,i.jsx)("p",(0,l._)((0,t._)({ref:r,id:m,className:(0,u.cn)("text-sm font-medium text-destructive",s)},a),{children:f})):null});T.displayName="FormMessage"}}]);