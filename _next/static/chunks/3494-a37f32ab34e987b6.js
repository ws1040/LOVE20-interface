try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="61694be5-a15c-4098-afc8-906aaa3b234e",e._sentryDebugIdIdentifier="sentry-dbid-61694be5-a15c-4098-afc8-906aaa3b234e")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3494],{83494:function(e,r,t){t.d(r,{Z:function(){return G}});var n=t(91309),s=t(85893),a=t(9008),i=t.n(a),o=t(67294),c=t(11163),l=t(11010),d=t(97582),u=t(39360),m=t(42130),f=t(62776),h=t(43877),x=t(17105),p=t(39625),v=t(27245),w=t(72253),g=t(14932),N=t(47702),b=t(93133),y=t(4307),j=t(78865),_=t(70162),k=t(40108),Z=b.fC,C=b.xz;b.ZA,b.Uv,b.Tr,b.Ee,o.forwardRef(function(e,r){var t=e.className,n=e.inset,a=e.children,i=(0,N._)(e,["className","inset","children"]);return(0,s.jsxs)(b.fF,(0,g._)((0,w._)({ref:r,className:(0,k.cn)("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t)},i),{children:[a,(0,s.jsx)(y.Z,{className:"ml-auto"})]}))}).displayName=b.fF.displayName,o.forwardRef(function(e,r){var t=e.className,n=(0,N._)(e,["className"]);return(0,s.jsx)(b.tu,(0,w._)({ref:r,className:(0,k.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t)},n))}).displayName=b.tu.displayName;var E=o.forwardRef(function(e,r){var t=e.className,n=e.sideOffset,a=(0,N._)(e,["className","sideOffset"]);return(0,s.jsx)(b.Uv,{children:(0,s.jsx)(b.VY,(0,w._)({ref:r,sideOffset:void 0===n?4:n,className:(0,k.cn)("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t)},a))})});E.displayName=b.VY.displayName;var P=o.forwardRef(function(e,r){var t=e.className,n=e.inset,a=(0,N._)(e,["className","inset"]);return(0,s.jsx)(b.ck,(0,w._)({ref:r,className:(0,k.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t)},a))});P.displayName=b.ck.displayName,o.forwardRef(function(e,r){var t=e.className,n=e.children,a=e.checked,i=(0,N._)(e,["className","children","checked"]);return(0,s.jsxs)(b.oC,(0,g._)((0,w._)({ref:r,className:(0,k.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a},i),{children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(b.wU,{children:(0,s.jsx)(j.Z,{className:"h-4 w-4"})})}),n]}))}).displayName=b.oC.displayName,o.forwardRef(function(e,r){var t=e.className,n=e.children,a=(0,N._)(e,["className","children"]);return(0,s.jsxs)(b.Rk,(0,g._)((0,w._)({ref:r,className:(0,k.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},a),{children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(b.wU,{children:(0,s.jsx)(_.Z,{className:"h-2 w-2 fill-current"})})}),n]}))}).displayName=b.Rk.displayName,o.forwardRef(function(e,r){var t=e.className,n=e.inset,a=(0,N._)(e,["className","inset"]);return(0,s.jsx)(b.__,(0,w._)({ref:r,className:(0,k.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t)},a))}).displayName=b.__.displayName,o.forwardRef(function(e,r){var t=e.className,n=(0,N._)(e,["className"]);return(0,s.jsx)(b.Z0,(0,w._)({ref:r,className:(0,k.cn)("-mx-1 my-1 h-px bg-muted",t)},n))}).displayName=b.Z0.displayName;var R=t(93974),z=o.forwardRef(function(e,r){var t=e.className,n=(0,N._)(e,["className"]);return(0,s.jsx)(R.fC,(0,w._)({ref:r,className:(0,k.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t)},n))});z.displayName=R.fC.displayName,o.forwardRef(function(e,r){var t=e.className,n=(0,N._)(e,["className"]);return(0,s.jsx)(R.Ee,(0,w._)({ref:r,className:(0,k.cn)("aspect-square h-full w-full",t)},n))}).displayName=R.Ee.displayName;var I=o.forwardRef(function(e,r){var t=e.className,n=(0,N._)(e,["className"]);return(0,s.jsx)(R.NY,(0,w._)({ref:r,className:(0,k.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t)},n))});I.displayName=R.NY.displayName;var F=t(23432),T=t(12797),S=t(42171),U=t(18289),A=t(70775),D=t(86501),J=t(74855),L=t(45631),V=t(55612);function q(){var e,r,t,a,i,c=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).className,w=(0,u.x)(),g=(0,m.m)(),N=g.address,b=g.isConnected,y=g.isConnecting,_=g.isReconnecting,R=(0,f.K)({address:N,chainId:w}).data,q=(0,h.$)(),M=q.connect,O=q.connectors,Y=q.error,B=q.isPending,W=(0,x.q)().disconnect,H=(0,n._)((0,o.useState)(!1),2),K=H[0],$=H[1],G=(0,n._)((0,o.useState)(null),2),Q=G[0],X=G[1],ee=(0,n._)((0,o.useState)(!1),2),er=ee[0],et=ee[1],en=(0,n._)((0,o.useState)(!1),2),es=en[0],ea=en[1],ei=O.find(function(e){return"injected"===e.id}),eo="Thinkium Mainnet Chain 1",ec=null===(i=L.v.chains[0])||void 0===i?void 0:i.id,el=(e=(0,l._)(function(){var e;return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(!window.ethereum)return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.ethereum.request({method:"eth_chainId"})];case 2:return X(e=parseInt(r.sent(),16)),et(!!ec&&e!==ec),[2,e];case 3:return r.sent(),[2,null];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),ed=(r=(0,l._)(function(e){var r,t,n,s,a;return(0,d.Jh)(this,function(i){switch(i.label){case 0:if(!e)return D.ZP.error("未配置目标网络"),[2,!1];i.label=1;case 1:if(i.trys.push([1,4,12,13]),ea(!0),!window.ethereum)return D.ZP.error("未找到钱包"),[2,!1];if(!L.v.chains[0])return D.ZP.error("未配置目标网络"),[2,!1];return r="0x"+e.toString(16),[4,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]})];case 2:return i.sent(),D.ZP.success("已连接到 ".concat(eo)),[4,el()];case 3:return i.sent(),[2,!0];case 4:if(!(4902===(t=i.sent()).code||-32603===t.code))return[3,10];i.label=5;case 5:return i.trys.push([5,8,,9]),n=L.v.chains[0],s={chainId:"0x"+e.toString(16),chainName:eo,nativeCurrency:n.nativeCurrency,rpcUrls:n.rpcUrls.default.http,blockExplorerUrls:n.blockExplorers?[n.blockExplorers.default.url]:void 0},[4,window.ethereum.request({method:"wallet_addEthereumChain",params:[s]})];case 6:return i.sent(),D.ZP.success("已添加并连接到 ".concat(eo)),[4,el()];case 7:return i.sent(),[2,!0];case 8:return a=i.sent(),D.ZP.error("添加网络失败: ".concat(a.message||"未知错误")),[2,!1];case 9:return[3,11];case 10:if(4001===t.code)return D.ZP.error("用户取消了网络切换"),[2,!1];return D.ZP.error("网络切换失败: ".concat(t.message||"未知错误")),[2,!1];case 11:return[3,13];case 12:return ea(!1),[7];case 13:return[2]}})}),function(e){return r.apply(this,arguments)}),eu=(t=(0,l._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:if(!ec)return D.ZP.error("未配置目标网络"),[2];return[4,ed(ec)];case 1:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)}),em=(a=(0,l._)(function(){var e;return(0,d.Jh)(this,function(r){try{if(!window.ethereum)return D.ZP.error("请安装 MetaMask 或使用支持的钱包浏览器"),[2];if(!ei)return D.ZP.error("未找到可用的钱包连接器"),[2];if(B||y)return D.ZP.error("连接请求正在处理中，请稍候"),[2];M({connector:ei})}catch(r){(null==r?void 0:r.name)==="UserRejectedRequestError"?D.ZP.error("用户取消了连接请求"):(null==r?void 0:null===(e=r.message)||void 0===e?void 0:e.includes("Connector not found"))?D.ZP.error("未找到钱包，请确保已安装并解锁钱包"):D.ZP.error("连接钱包失败，请重试")}return[2]})}),function(){return a.apply(this,arguments)});o.useEffect(function(){Y&&(Y.message.includes("User rejected")?D.ZP.error("用户取消了连接请求"):Y.message.includes("already pending")?D.ZP.error("已有连接请求在处理中"):D.ZP.error("连接失败: "+Y.message))},[Y]);var ef=(0,o.useRef)(b);(0,o.useEffect)(function(){var e,r=(e=(0,l._)(function(){var e;return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(!(!ef.current&&b&&N)||!w)return[3,2];return e="Thinkium Mainnet Chain 1",[4,ed(w)];case 1:r.sent()||D.ZP.error("网络切换失败，请手动切换到".concat(e)),r.label=2;case 2:return[2]}})}),function(){return e.apply(this,arguments)});(0,V.ON)()||r(),ef.current=b},[b,N]),(0,o.useEffect)(function(){if(window.ethereum){var e,r,t=(e=(0,l._)(function(e){var r,t;return(0,d.Jh)(this,function(n){return X(r=parseInt(e,16)),et(t=!!ec&&r!==ec),t&&D.ZP.error("网络不匹配，请及时切换"),[2]})}),function(r){return e.apply(this,arguments)}),n=(r=(0,l._)(function(e){return(0,d.Jh)(this,function(r){switch(r.label){case 0:if(0!==e.length)return[3,1];return X(null),et(!1),[3,3];case 1:return[4,el()];case 2:r.sent(),r.label=3;case 3:return[2]}})}),function(e){return r.apply(this,arguments)});return window.ethereum.on("chainChanged",t),window.ethereum.on("accountsChanged",n),b&&el(),function(){window.ethereum&&(window.ethereum.removeListener("chainChanged",t),window.ethereum.removeListener("accountsChanged",n))}}},[b,ec]),(0,o.useEffect)(function(){var e=setTimeout(function(){window.ethereum},1e3);return function(){return clearTimeout(e)}},[]);var eh=y||_||B;return b&&er?(0,s.jsx)(v.z,{onClick:eu,disabled:es,className:(0,k.cn)("bg-red-500 hover:bg-red-600 text-white font-medium px-6 py-2.5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",c),children:es?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"切换网络中..."]}):(0,s.jsx)(s.Fragment,{children:"网络错误，请切换"})}):b?(0,s.jsxs)(Z,{children:[(0,s.jsx)(C,{asChild:!0,children:(0,s.jsx)(v.z,{variant:"outline",className:(0,k.cn)("h-auto px-3 py-1.5 rounded-xl border hover:border-blue-300 transition-all duration-200 bg-white/50 backdrop-blur-sm",c),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(z,{className:"w-8 h-8 mr-3",children:(0,s.jsx)(I,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white text-xs font-bold",children:N?N.slice(2,4).toUpperCase():"W"})}),(0,s.jsxs)("div",{className:"flex flex-col items-start min-w-0 mr-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-mono text-sm font-medium text-gray-900 mr-2",children:N?"".concat(N.slice(0,6),"...").concat(N.slice(-4)):""}),Q&&ec&&Q!==ec&&(0,s.jsx)("span",{className:"text-xs text-red-500 font-medium",children:"网络不匹配"})]}),(0,s.jsx)("div",{className:"flex items-center text-xs text-gray-600",children:(0,s.jsxs)("span",{className:"font-semibold",children:[R?function(e){if(!e)return"0";var r=parseFloat((0,p.d)(e));return 0===r?"0":r<1e-4?"<0.0001":r<1?r.toFixed(4):r<100?r.toFixed(2):r.toFixed(0)}(R.value):"0"," ",(null==R?void 0:R.symbol)||"ETH"]})})]}),(0,s.jsx)(S.Z,{className:"w-4 h-4 text-gray-500"})]})})}),(0,s.jsxs)(E,{align:"end",className:"w-64 p-2 rounded-xl shadow-xl border",children:[(0,s.jsxs)("div",{className:"px-3 py-2 mb-2 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"钱包地址"}),N&&(0,s.jsx)(J.CopyToClipboard,{text:N,onCopy:function(e,r){r?($(!0),D.ZP.success("地址已复制到剪贴板"),setTimeout(function(){return $(!1)},2e3)):D.ZP.error("复制失败")},children:(0,s.jsx)(v.z,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",children:K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"已复制"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.Z,{className:"w-3 h-3 mr-1"}),"复制"]})})})]}),(0,s.jsx)("p",{className:"font-mono text-xs text-gray-600 mt-1 break-all",children:N})]}),(0,s.jsxs)(P,{onClick:function(){try{W()}catch(e){D.ZP.error("断开连接失败")}},className:"rounded-lg text-red-600 focus:text-red-600 focus:bg-red-50",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 mr-3"}),"断开连接"]})]})]}):(0,s.jsx)(v.z,{onClick:em,disabled:eh,className:(0,k.cn)("bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium px-6 py-2.5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200",c),children:eh?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"连接中..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 mr-2"}),"连接钱包"]})})}var M=t(68655),O=(0,t(12003).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Y=o.forwardRef(function(e,r){var t=e.className,n=e.variant,a=(0,N._)(e,["className","variant"]);return(0,s.jsx)("div",(0,w._)({ref:r,role:"alert",className:(0,k.cn)(O({variant:n}),t)},a))});Y.displayName="Alert";var B=o.forwardRef(function(e,r){var t=e.className,n=(0,N._)(e,["className"]);return(0,s.jsx)("h5",(0,w._)({ref:r,className:(0,k.cn)("mb-1 font-medium leading-none tracking-tight",t)},n))});B.displayName="AlertTitle";var W=o.forwardRef(function(e,r){var t=e.className,n=(0,N._)(e,["className"]);return(0,s.jsx)("div",(0,w._)({ref:r,className:(0,k.cn)("text-sm [&_p]:leading-relaxed",t)},n))});W.displayName="AlertDescription";var H=t(95049),K=function(){var e=(0,H.V)(),r=e.error,t=e.setError,a=(0,n._)((0,o.useState)(!1),2),i=a[0],c=a[1];return((0,o.useEffect)(function(){r&&c(!0)},[r,t]),i&&r)?(0,s.jsxs)(Y,{variant:"destructive",children:[(0,s.jsx)(M.Z,{className:"h-4 w-4"}),(0,s.jsx)(B,{className:"break-words break-all whitespace-normal",children:r.name}),(0,s.jsx)(W,{className:"break-words break-all whitespace-pre-wrap",children:r.message})]}):null},$=t(93778),G=function(e){var r=e.title,t=e.showBackButton,a=e.backUrl,l=void 0===a?"":a,d=(0,m.m)(),f=d.address,h=d.status,x=(0,u.x)(),p="Thinkium Mainnet Chain 1",w=(0,H.V)().setError,g=((0,o.useContext)($.M)||{}).token,N=(0,c.useRouter)(),b=(0,n._)((0,o.useState)(0),2),y=b[0],j=b[1],_=(0,n._)((0,o.useState)(!1),2),k=_[0],Z=_[1];(0,o.useEffect)(function(){localStorage.getItem("networkAutoRefreshed")&&localStorage.removeItem("networkAutoRefreshed");var e=function(e){if(e&&e.message&&(e.message.includes("f is not a function")||e.message.includes("User rejected")&&e.message.includes("Details:"))){var r=Date.now();r-y>3e4&&!k&&(j(r),Z(!0),setTimeout(function(){localStorage.setItem("networkAutoRefreshed","true"),window.location.reload()},2e3))}};window.addEventListener("error",function(r){r.error&&"object"==typeof r.error&&e(r.error)});var r=window.onerror;return window.onerror=function(t,n,s,a,i){return e(i),!!r&&r(t,n,s,a,i)},window.addEventListener("unhandledrejection",function(r){e(r.reason)}),function(){window.onerror=r,window.removeEventListener("unhandledrejection",function(r){e(r.reason)})}},[y,k]),(0,o.useEffect)(function(){"connected"===h&&(f&&!x?w({name:"钱包网络错误",message:"请切换到 ".concat(p," 网络")}):w(null))},[f,x,h,p,w]);var C=g&&g.symbol?g.symbol:"LOVE20",E=g&&g.symbol?"".concat(r," - ").concat(g.symbol):r;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:C}),(0,s.jsx)("meta",{name:E,content:"A Web3 DApp for LOVE20 token management"})]}),(0,s.jsxs)("header",{className:"flex justify-between items-center py-2 px-4",children:[(0,s.jsx)("div",{className:"flex items-center",children:(void 0!==t&&t||""!==l)&&(0,s.jsx)(v.z,{variant:"outline",size:"sm",onClick:function(){l?N.push(l):N.back()},className:"flex items-center space-x-2 px-3 py-1 text-gray-500 border-gray-200 hover:bg-gray-50 hover:text-gray-900",title:"返回上一页",children:(0,s.jsx)("span",{className:"text-sm font-medium",children:"<\xa0返回"})})}),(0,s.jsx)(q,{})]}),(0,s.jsx)("div",{className:"px-4",children:(0,s.jsx)(K,{})})]})}}}]);