try{!function(){var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new n.Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="9764ba63-8023-4ea3-958f-d192643dd4c1",n._sentryDebugIdIdentifier="sentry-dbid-9764ba63-8023-4ea3-958f-d192643dd4c1")}()}catch(n){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1274],{84476:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/myaction",function(){return t(65293)}])},8184:function(n,e,t){"use strict";t.d(e,{Z:function(){return f}});var s=t(85893),i=t(67294),o=t(20975),r=t(11163),a=t(41664),d=t.n(a),c=t(41192),l=t(99019),u=t(1504);function m(n){var e=n.isJoined,t=n.actionId,o=(n.userJoinedAmount,n.isPending),r=((0,i.useContext)(c.M)||{}).token;if(!r)return null;var a="/acting/join?symbol=".concat(r.symbol,"&id=").concat(t),l="/my/myaction?symbol=".concat(r.symbol,"&id=").concat(t);return void 0!==o&&o?(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("div",{className:"loading loading-spinner loading-md"})}):(0,s.jsx)("div",{className:"mt-4 flex justify-center",children:e?(0,s.jsx)(d(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:l,children:"我的参与 >>"}):(0,s.jsx)(u.z,{className:"w-1/2",asChild:!0,children:(0,s.jsx)(d(),{href:a,children:"加入行动 >>"})})})}function f(n){var e=n.actionInfo,t=n.participantCount,a=n.totalAmount,u=n.isJoined,f=n.userJoinedAmount,x=n.isPending,h=n.showActionButtons,v=void 0===h||h,y=n.linkToActionInfo,g=void 0!==y&&y,b=((0,i.useContext)(c.M)||{}).token,j=(0,o.m)().address,N=(0,r.useRouter)();if(!b)return(0,s.jsx)("div",{children:"Token信息加载中..."});var p=a?(0,l.LH)(a):"0";return(0,s.jsxs)("div",{className:"bg-gray-100 rounded-lg px-4 pt-2 pb-2 text-sm my-4 ".concat(g?"cursor-pointer hover:bg-gray-200 transition-colors":""),onClick:function(){g&&b&&N.push("/action/info?symbol=".concat(b.symbol,"&id=").concat(e.head.id))},children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("h1",{className:"text-lg mb-1",children:(0,s.jsxs)("div",{className:"flex items-baseline",children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"No."}),(0,s.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:e.head.id.toString()}),(0,s.jsx)("span",{className:"font-bold text-gray-800",children:e.body.title})]})})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-gray-500 mr-2",children:"参与代币总数:"}),(0,s.jsxs)("span",{className:"font-mono text-secondary",children:[p," "]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-gray-500 mr-2",children:"参与地址数:"}),(0,s.jsx)("span",{className:"font-mono text-secondary",children:(null==t?void 0:t.toString())||"0"})]})]}),v&&e&&j&&(0,s.jsx)(m,{isJoined:u,actionId:e.head.id,userJoinedAmount:f,isPending:x}),!v&&(0,s.jsx)("div",{className:"mt-4 flex justify-center",children:(0,s.jsx)(d(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/action/info?symbol=".concat(null==b?void 0:b.symbol,"&id=").concat(e.head.id),children:"行动详情 >>"})})]})}},20538:function(n,e,t){"use strict";t.d(e,{r:function(){return l}});var s=t(91309),i=t(67294),o=t(24601),r=t(44628),a=t(3806),d=t(30460),c="0xACea4f086BE05BeA47f3A56788FA3919C7f40799",l=function(n){var e=n.tokenAddress,t=n.actionId,l=n.account,u=(0,i.useMemo)(function(){if(!e||void 0===t)return[];var n=[{address:"0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",abi:r.d,functionName:"actionInfo",args:[e,t]},{address:c,abi:a.S,functionName:"amountByActionId",args:[e,t]},{address:c,abi:a.S,functionName:"numOfAccounts",args:[e,t]},{address:c,abi:a.S,functionName:"currentRound",args:[]}];return l&&n.push({address:c,abi:a.S,functionName:"amountByActionIdByAccount",args:[e,t,l]}),n},[e,t,l]),m=(0,o.N)({contracts:u,query:{enabled:!!e&&void 0!==t&&u.length>0}}),f=m.data,x=m.isPending,h=m.error;return(0,i.useMemo)(function(){if(!f||!e||void 0===t)return{actionInfo:void 0,participantCount:void 0,totalAmount:void 0,userJoinedAmount:void 0,isJoined:!1,currentRound:void 0,isPending:x,error:h};var n=(0,s._)(f,5),i=n[0],o=n[1],r=n[2],a=n[3],c=n[4],l=null==i?void 0:i.result,u=(null==o?void 0:o.result)?(0,d.Zu)(o.result):void 0,m=(null==r?void 0:r.result)?(0,d.Zu)(r.result):void 0,v=(null==a?void 0:a.result)?(0,d.Zu)(a.result):void 0,y=(null==c?void 0:c.result)?(0,d.Zu)(c.result):void 0,g=!!y&&y>BigInt(0);return{actionInfo:l,participantCount:m,totalAmount:u,userJoinedAmount:y,isJoined:g,currentRound:v,isPending:x,error:h}},[f,e,t,x,h])}},65293:function(n,e,t){"use strict";t.r(e);var s=t(85893),i=t(67294),o=t(11163),r=t(20975),a=t(20538),d=t(99522),c=t(81231),l=t(761),u=t(8184),m=t(41192),f=t(83446);e.default=function(){var n=(0,o.useRouter)().query.id,e=n?BigInt(n):void 0,t=(0,r.m)().address,x=((0,i.useContext)(m.M)||{}).token,h=(0,a.r)({tokenAddress:null==x?void 0:x.address,actionId:e,account:t}),v=h.actionInfo,y=h.participantCount,g=h.totalAmount,b=h.userJoinedAmount,j=h.isJoined,N=h.isPending,p=h.error,I=(0,d.S)().handleContractError;return((0,i.useEffect)(function(){p&&I(p,"submit")},[p]),void 0===e)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{title:"行动激励",showBackButton:!0}),(0,s.jsx)("main",{className:"flex-grow",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)("div",{className:"text-center text-red-500",children:"参数错误：缺少行动ID参数"})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{title:"行动激励",showBackButton:!0}),(0,s.jsx)("main",{className:"flex-grow",children:(0,s.jsxs)("div",{className:"px-4 pt-0 pb-3",children:[v&&(0,s.jsx)(u.Z,{actionInfo:v,participantCount:y,totalAmount:g,isJoined:j,userJoinedAmount:b,isPending:N,showActionButtons:!1,linkToActionInfo:!0}),N?(0,s.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(l.Z,{}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"加载数据中..."})]})}):p?(0,s.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,s.jsxs)("div",{className:"text-center text-red-500",children:["加载失败：",p.message||"获取行动信息失败，请稍后重试"]})}):v?(0,s.jsx)(f.Z,{actionId:e,actionInfo:v}):(0,s.jsx)("div",{className:"bg-white rounded-lg p-8",children:(0,s.jsx)("div",{className:"text-center text-yellow-600",children:"行动不存在：找不到指定的行动信息"})})]})})]})}},24601:function(n,e,t){"use strict";t.d(e,{N:function(){return u}});var s=t(72253),i=t(14932),o=t(97995),r=t(36100),a=t(67294),d=t(86109),c=t(47070),l=t(80155);function u(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.contracts,u=void 0===t?[]:t,m=e.query,f=void 0===m?{}:m,x=(0,l.Z)(e),h=(0,c.x)({config:x}),v=function(n,e={}){return{async queryFn({queryKey:t}){let s=[],i=t[1].contracts.length;for(let n=0;n<i;n++){let i=t[1].contracts[n],o=(e.contracts?.[n]).abi;s.push({...i,abi:o})}let{scopeKey:r,...a}=t[1];return(0,o.J)(n,{...a,contracts:s})},queryKey:function(n={}){let e=[];for(let t of n.contracts??[]){let{abi:s,...i}=t;e.push({...i,chainId:i.chainId??n.chainId})}return["readContracts",(0,r.OP)({...n,contracts:e})]}(e)}}(x,(0,i._)((0,s._)({},e),{chainId:h})),y=(0,a.useMemo)(function(){var n,e=!1,t=!0,s=!1,i=void 0;try{for(var o,r=u[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value,d=a.abi,c=a.address,l=a.functionName;if(!d||!c||!l){e=!1;break}e=!0}}catch(n){s=!0,i=n}finally{try{t||null==r.return||r.return()}finally{if(s)throw i}}return!!(e&&(null===(n=f.enabled)||void 0===n||n))},[u,f.enabled]);return(0,d.aM)((0,i._)((0,s._)({},v,f),{enabled:y,structuralSharing:null!==(n=f.structuralSharing)&&void 0!==n?n:r.if}))}}},function(n){n.O(0,[7395,6457,8700,1985,7431,4628,3614,2888,9774,179],function(){return n(n.s=84476)}),_N_E=n.O()}]);