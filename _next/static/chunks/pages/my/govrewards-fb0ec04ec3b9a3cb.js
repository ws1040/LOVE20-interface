try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="08e9457a-fadc-48b6-b216-41ced96e3c29",e._sentryDebugIdIdentifier="sentry-dbid-08e9457a-fadc-48b6-b216-41ced96e3c29")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9280],{37162:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my/govrewards",function(){return n(90540)}])},26848:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var s=(0,n(1462).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},41944:function(e,t,n){"use strict";var s=n(85893);t.Z=function(e){var t=e.title;return(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsx)("h1",{className:"text-lg font-bold",children:t})})}},761:function(e,t,n){"use strict";var s=n(85893),r=n(45197);t.Z=function(){return(0,s.jsx)(r.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},90540:function(e,t,n){"use strict";n.r(t);var s=n(11010),r=n(72253),i=n(14932),c=n(91309),a=n(4586),l=n(97582),d=n(85893),o=n(67294),u=n(20975),f=n(1504),x=n(86501),h=n(41664),g=n.n(h),m=n(26848),j=n(99019),b=n(41192),y=n(81337),p=n(81736),v=n(54653),N=n(99522),I=n(81231),w=n(41944),B=n(761),_=n(26749),k=BigInt(20);t.default=function(){var e,t=((0,o.useContext)(b.M)||{}).token,n=(0,u.m)().address,h=(0,p.Bk)(),E=h.currentRound,S=h.error,Z=h.isPending,$=(0,c._)((0,o.useState)(BigInt(0)),2),R=$[0],C=$[1],M=(0,c._)((0,o.useState)(BigInt(0)),2),P=M[0],z=M[1],D=(0,c._)((0,o.useState)(!0),2),L=D[0],T=D[1],H=(0,o.useRef)(null);(0,o.useEffect)(function(){void 0!==E&&t&&(E<=BigInt(t.initialStakeRound)?z(BigInt(0)):z(BigInt(E>=BigInt(1)?E-BigInt(1):BigInt(0))))},[E,t]),(0,o.useEffect)(function(){P&&t&&(P-BigInt(t.initialStakeRound)>=k?C(P-k):C(BigInt(t.initialStakeRound)))},[P,t]);var O=(0,y.Ci)(null==t?void 0:t.address,n,R,P),F=O.rewards,X=O.isPending,G=O.error,J=(0,c._)((0,o.useState)([]),2),K=J[0],V=J[1];(0,o.useEffect)(function(){F&&V((0,a._)(F).sort(function(e,t){return e.round>t.round?-1:1}))},[F]),(0,o.useEffect)(function(){t&&T(R>BigInt(t.initialStakeRound))},[R,t]);var W=(0,v.xg)(),q=W.mintGovReward,A=W.isPending,Q=W.isConfirming,U=W.isConfirmed,Y=W.writeError,ee=(0,c._)((0,o.useState)(null),2),et=ee[0],en=ee[1];(0,o.useEffect)(function(){U&&(V(function(e){return e.map(function(e){return e.round===et?(0,i._)((0,r._)({},e),{isMinted:!0}):e})}),x.ZP.success("铸造成功"))},[U,et]);var es=(e=(0,s._)(function(e){return(0,l.Jh)(this,function(s){switch(s.label){case 0:if(!((null==t?void 0:t.address)&&n))return[3,2];return en(e),[4,q(t.address,e)];case 1:s.sent(),s.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)}),er=(0,N.S)().handleContractError;(0,o.useEffect)(function(){G&&er(G,"dataViewer"),S&&er(S,"mint"),Y&&er(Y,"mint")},[G,S,Y,er]);var ei=(0,o.useCallback)(function(){if(t){var e=BigInt(t.initialStakeRound);C(function(t){return t>e?t-k>=e?t-k:e:t})}},[t]);return((0,o.useEffect)(function(){if(H.current){var e=H.current,t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&!X&&L&&ei()})},{root:null,rootMargin:"200px",threshold:0});return t.observe(e),function(){t.unobserve(e),t.disconnect()}}},[ei,X,L]),Z)?(0,d.jsx)(B.Z,{}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(I.Z,{title:"治理激励",showBackButton:!0}),(0,d.jsxs)("main",{className:"flex-grow",children:[t?(0,d.jsxs)("div",{className:"flex flex-col space-y-2 p-4",children:[(0,d.jsx)(w.Z,{title:"铸造治理激励"}),P===BigInt(0)&&void 0!==E?(0,d.jsx)("div",{className:"text-center text-gray-500 py-4",children:"当前还不能铸造激励，请耐心等待"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("table",{className:"table w-full table-auto",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,d.jsx)("th",{children:"轮次"}),(0,d.jsx)("th",{className:"text-center px-1",children:"总激励"}),(0,d.jsx)("th",{className:"text-center px-2",children:(0,d.jsxs)("div",{className:"inline-flex items-center justify-center",children:[(0,d.jsx)("span",{children:"验证激励"}),(0,d.jsx)(g(),{href:"/gov/stakelp/?symbol=".concat((null==t?void 0:t.symbol)||""),className:"ml-1 text-greyscale-500 hover:text-secondary","aria-label":"验证激励说明",title:"验证激励说明",children:(0,d.jsx)(m.Z,{size:16})})]})}),(0,d.jsx)("th",{className:"text-center px-2",children:(0,d.jsxs)("div",{className:"inline-flex items-center justify-center",children:[(0,d.jsx)("span",{children:"加速激励"}),(0,d.jsx)(g(),{href:"/gov/staketoken/?symbol=".concat((null==t?void 0:t.symbol)||""),className:"ml-1 text-greyscale-500 hover:text-secondary","aria-label":"加速激励说明",title:"加速激励说明",children:(0,d.jsx)(m.Z,{size:16})})]})}),(0,d.jsx)("th",{className:"text-center px-2",children:"结果"})]})}),(0,d.jsx)("tbody",{children:0!==K.length||X?K.map(function(e){return(0,d.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,d.jsx)("td",{children:t?(0,j.cK)(e.round,t).toString():"-"}),(0,d.jsx)("td",{className:"text-center px-1",children:(0,j.LH)(e.reward||BigInt(0))}),(0,d.jsx)("td",{className:"text-center px-2 bg-greyscale-100",children:(0,j.LH)(e.verifyReward||BigInt(0))}),(0,d.jsx)("td",{className:"text-center px-2 bg-greyscale-100",children:(0,j.LH)(e.boostReward||BigInt(0))}),(0,d.jsx)("td",{className:"text-center px-2",children:e.reward>BigInt(0)&&!e.isMinted?(0,d.jsx)(f.z,{variant:"outline",size:"sm",className:"text-secondary border-secondary",onClick:function(){return es(e.round)},disabled:A||Q,children:"铸造"}):e.isMinted?(0,d.jsx)("span",{className:"text-greyscale-500",children:"已铸造"}):(0,d.jsx)("span",{className:"text-greyscale-500",children:"-"})})]},e.round.toString())}):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:3,className:"text-center text-sm text-gray-500 py-4",children:"暂无数据"})})})]}),(0,d.jsx)("div",{ref:H,className:"h-12 flex justify-center items-center",children:X?(0,d.jsx)(B.Z,{}):L?(0,d.jsx)("span",{className:"text-sm text-gray-500",children:"加载更多..."}):(0,d.jsx)("span",{className:"text-sm text-gray-500",children:"没有更多激励"})})]})]}):(0,d.jsx)(B.Z,{}),(0,d.jsx)(_.Z,{isLoading:A||Q,text:A?"提交交易...":"确认交易..."})]})]})}},21803:function(e,t,n){"use strict";function s(e,t){let[n,s="0"]=e.split("."),r=n.startsWith("-");if(r&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${s}`))&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){let[e,r,i]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],c=Math.round(Number(`${r}.${i}`));(s=c>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${c}`).length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${r?"-":""}${n}${s}`)}n.d(t,{v:function(){return s}})}},function(e){e.O(0,[7395,6457,8700,1985,4653,1736,2888,9774,179],function(){return e(e.s=37162)}),_N_E=e.O()}]);