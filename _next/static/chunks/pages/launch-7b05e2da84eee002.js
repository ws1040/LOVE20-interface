(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6185],{8917:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch",function(){return n(67574)}])},67574:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>L});var t=n(3576),a=n(62701),r=n(37876),l=n(14232),c=n(83416),i=n(40752),o=n(4113),d=n(60154),m=n(12293),x=n(63934),u=n(57607),h=n(20442),N=n(1709),j=n(99742);let v=e=>{var s=e.token,n=e.launchInfo,t=Number(n.totalContributed)/Number(n.parentTokenFundraisingGoal),a=(100*t).toFixed(1),l=(0,x.y)().data;if(!n)return(0,r.jsx)("div",{className:"text-red-500",children:"找不到发射信息"});if(!s)return(0,r.jsx)(m.A,{});var c=s.parentTokenSymbol==j.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL?j.env.NEXT_PUBLIC_NATIVE_TOKEN_SYMBOL:s.parentTokenSymbol;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex-col items-center mb-2 mt-4 px-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(N.A,{title:"公平发射"}),n.hasEnded&&(0,r.jsx)("span",{className:"stat-title text-base text-red-500",children:"（已结束）"})]}),(0,r.jsx)("div",{className:"stats w-full",children:(0,r.jsxs)("div",{className:"stat place-items-center",children:[(0,r.jsx)("div",{className:"stat-title text-sm mr-6 ",children:"申购累计筹集到"}),(0,r.jsxs)("div",{className:"stat-value",children:[(0,r.jsx)("span",{className:"text-3xl text-secondary",children:(0,h.NJ)(n.totalContributed)}),(0,r.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:c})]}),(0,r.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,r.jsxs)("div",{className:"stat place-items-center pb-1 pl-0",children:[(0,r.jsxs)("div",{className:"stat-title text-sm",children:[(0,r.jsx)("span",{children:c}),"筹集目标"]}),(0,r.jsx)("div",{className:"stat-value text-xl",children:(0,h.NJ)(n.parentTokenFundraisingGoal)})]}),(0,r.jsxs)("div",{className:"stat place-items-center pb-1 pl-0",children:[(0,r.jsxs)("div",{className:"stat-title text-sm",children:[(0,r.jsxs)("span",{children:[s.symbol," "]}),"发射总量"]}),(0,r.jsx)("div",{className:"stat-value text-xl",children:"".concat((0,h.NJ)(BigInt(u.F.fairLaunch)))})]})]}),(0,r.jsxs)("div",{className:"text-center text-xs text-greyscale-500",children:["兑换比例：1 ",c," ="," ",(0,h.lM)((0,h.mW)((Number(u.F.fairLaunch)/Number(n.parentTokenFundraisingGoal)).toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2})))," ",s.symbol]}),(0,r.jsxs)("div",{className:"mt-2 rounded-lg text-sm",children:[(0,r.jsx)("p",{className:"mt-2 mb-1 font-medium",children:"发射结束条件："}),(0,r.jsxs)("p",{className:"text-greyscale-600",children:["1. 累计申购达到募资目标 100%",!n.hasEnded&&"（当前 ".concat(a,"%）")]}),(0,r.jsxs)("p",{className:"text-greyscale-600",children:["2. 最后一笔申购，距离首笔达成 50%募资目标的所在区块",!n.hasEnded&&t>=.5&&(()=>{var e=Number(n.secondHalfStartBlock)+Number(n.secondHalfMinBlocks),s=Number(l||0),a=e-s;return a<=0?t>=1?"（第 ".concat(n.secondHalfStartBlock.toString(),"区块），至少").concat(n.secondHalfMinBlocks.toString(),"个区块（已满足条件，任意一笔新的申购将触发公平发射结束）"):"（第 ".concat(n.secondHalfStartBlock.toString(),"区块），至少").concat(n.secondHalfMinBlocks.toString(),"个区块（已满足条件）"):"（第 ".concat(n.secondHalfStartBlock.toString(),"区块），至少").concat(n.secondHalfMinBlocks.toString(),"个区块（当前区块：第").concat(s,"区块，还需等待").concat(a,"个区块）")})(),!n.hasEnded&&t<.5&&"，至少".concat(n.secondHalfMinBlocks.toString(),"个区块"),n.hasEnded&&"（第 ".concat(n.secondHalfStartBlock.toString(),"区块），至少").concat(n.secondHalfMinBlocks.toString(),"个区块")]})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 mt-4 text-sm",children:[(0,r.jsx)("p",{className:"mt-1 font-medium",children:"经济模型："}),(0,r.jsxs)("p",{children:["1. 代币总量：",(0,h.NJ)(BigInt(u.F.totalSupply))]}),(0,r.jsxs)("p",{children:["2. 发射数量：",(0,h.NJ)(BigInt(u.F.fairLaunch))," (10%)"]}),(0,r.jsxs)("p",{children:["3. 治理激励：",(0,h.NJ)(BigInt(u.F.govRewards))," (45%)"]}),(0,r.jsxs)("p",{children:["4. 行动激励：",(0,h.NJ)(BigInt(u.F.actionRewards))," (45%)"]}),(0,r.jsx)("p",{className:"mt-3 font-medium",children:"发射规则："}),(0,r.jsx)("p",{children:"1. 代币发放：按申购数量占比平均发放"}),(0,r.jsx)("p",{children:"2. 超过募集目标的父币，将按申购比例返还"})]})]})})};var f=n(16927),g=n(4902),p=n(6960),b=n(8047),y=n(89099),_=n(48230),T=n.n(_),E=n(97685),k=n(65575),S=n(99574),C=n(99742);let A=e=>{var s=e.token;e.launchInfo;var n=(0,b.F)(),t=n.address,a=n.isConnected,c=(0,x.y)().data,d=(0,y.useRouter)(),u=(0,i.$r)(null==s?void 0:s.address,a?t:"0x0000000000000000000000000000000000000000"),j=u.contributed,v=u.isPending,_=u.error,A=u.refetch,B=(0,i.MU)(null==s?void 0:s.address,a?t:"0x0000000000000000000000000000000000000000"),I=B.lastContributedBlock,w=B.isPending,L=B.error,P=(0,k.oQ)(C.env.NEXT_PUBLIC_WITHDRAW_WAITING_BLOCKS||"0")-((c?BigInt(c):0n)-(I||0n)),F=(0,i.S1)(),O=F.withdraw,M=F.isPending,H=F.writeError,R=F.isConfirming,U=F.isConfirmed;(0,l.useEffect)(()=>{U&&(E.Ay.success("撤回成功"),A(),setTimeout(()=>{d.push("/launch/?symbol=".concat(null==s?void 0:s.symbol))},1e3))},[U]);var X=(0,o.g)().handleContractError;if((0,l.useEffect)(()=>{_&&X(_,"launch"),L&&X(L,"launch"),H&&X(H,"launch")},[_,L,H]),!s||v||w)return(0,r.jsx)(m.A,{});var Y=s.parentTokenSymbol==C.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL?C.env.NEXT_PUBLIC_NATIVE_TOKEN_SYMBOL:s.parentTokenSymbol;return(0,r.jsxs)("div",{className:"px-6",children:[(0,r.jsx)(N.A,{title:"参与申购"}),(0,r.jsx)("div",{className:"stats w-full",children:(0,r.jsxs)("div",{className:"stat place-items-center",children:[(0,r.jsx)("div",{className:"stat-title text-sm mr-6",children:"我的申购质押"}),(0,r.jsxs)("div",{className:"stat-value text-secondary",children:[(0,h.NJ)(j||0n),(0,r.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:Y})]})]})}),(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[j&&j>0n&&(0,r.jsx)(p.$,{variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary",onClick:()=>(0,f._)(function(){return(0,g.YH)(this,function(e){switch(e.label){case 0:if(P>0n)return E.Ay.error("还需要等待 ".concat(P," 个区块才能撤回")),[2];return[4,O(null==s?void 0:s.address)];case 1:return e.sent(),[2]}})})(),disabled:M||R||U,children:M?"提交中...":R?"确认中...":U?"已撤回":"撤回申购"}),(0,r.jsx)(p.$,{variant:"outline",size:"sm",className:"w-1/2 text-secondary border-secondary",asChild:!0,children:(0,r.jsx)(T(),{href:"/launch/contribute?symbol=".concat(null==s?void 0:s.symbol),children:j&&j>0n?"增加申购":"去申购"})})]}),j&&j>0n&&(0,r.jsxs)("div",{className:"mt-4 text-sm text-greyscale-500 text-center",children:["申购后需等 ",C.env.NEXT_PUBLIC_WITHDRAW_WAITING_BLOCKS," 个区块才能撤回（当前还需等"," ",P>0?P.toString():"0"," 个区块）"]}),(0,r.jsx)("div",{className:"border-t border-gray-200 mt-4 mb-6"}),(0,r.jsx)(S.A,{isLoading:M||R,text:M?"提交交易...":"确认交易..."})]})};var B=n(99742);let I=e=>{var s=e.token;e.launchInfo;var n=(0,b.F)().address,t=((0,l.useContext)(c.N)||{}).clearToken,a=(0,i.$r)(null==s?void 0:s.address,n),d=a.contributed,x=(a.isPending,a.error),u=(0,i.Wc)(null==s?void 0:s.address,n),j=u.receivedTokenAmount,v=u.extraRefund,y=u.isClaimed,_=u.isPending,k=u.error;console.log("receivedTokenAmount",j);var C=(0,i.G0)(),A=C.claim,I=C.isPending,w=C.writeError,L=C.isConfirming,P=C.isConfirmed;(0,l.useEffect)(()=>{P?(E.Ay.success("领取成功"),null==t||t(),setTimeout(()=>{window.location.reload()},1e3)):w&&E.Ay.error("领取失败")},[P,w]);var F=(0,o.g)().handleContractError;if((0,l.useEffect)(()=>{w&&F(w,"launch"),k&&F(k,"launch"),x&&F(x,"launch")},[w,k,x]),!n)return"";if(_||!s)return(0,r.jsx)(m.A,{});var O=s.parentTokenSymbol==B.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL?B.env.NEXT_PUBLIC_NATIVE_TOKEN_SYMBOL:s.parentTokenSymbol;return(0,r.jsxs)("div",{className:"px-4 mt-2",children:[(0,r.jsx)(N.A,{title:"我的申购"}),(0,r.jsx)("div",{className:"stats w-full",children:(0,r.jsxs)("div",{className:"stat place-items-center",children:[(0,r.jsx)("div",{className:"stat-title text-sm mr-6",children:"共获得"}),(0,r.jsxs)("div",{className:"stat-value text-3xl text-secondary",children:[(0,h.NJ)(null!=j?j:0n),(0,r.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:s.symbol})]})]})}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[0>=Number(d)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.$,{className:"w-1/2",disabled:!0,children:"未申购"}),(0,r.jsx)(p.$,{className:"w-1/2",asChild:!0,children:(0,r.jsx)(T(),{href:"/launch/burn?symbol=".concat(null==s?void 0:s.symbol),children:"换回父币"})})]}),Number(d)>0&&!y&&(0,r.jsx)(p.$,{className:"w-1/2",onClick:()=>(0,f._)(function(){return(0,g.YH)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,A(null==s?void 0:s.address)];case 1:return e.sent(),[3,3];case 2:return console.error("领取失败:",e.sent()),[3,3];case 3:return[2]}})})(),disabled:I||L||P,children:I?"领取中...":L?"确认中...":P?"已领取":"领取"}),Number(d)>0&&y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.$,{className:"w-1/2",disabled:!0,children:"已领取"}),(0,r.jsx)(p.$,{className:"w-1/2",asChild:!0,children:(0,r.jsx)(T(),{href:"/launch/burn?symbol=".concat(null==s?void 0:s.symbol),children:"换回父币"})})]})]}),Number(d)>0&&y&&(0,r.jsxs)("div",{className:"text-center text-sm my-2 text-greyscale-400",children:["我共申购了 ",(0,r.jsxs)("span",{className:"text-secondary",children:[(0,h.NJ)(null!=d?d:0n)," "]}),O,"，申购返还了 ",(0,r.jsx)("span",{className:"text-secondary",children:(0,h.NJ)(null!=v?v:0n)})," ",s.parentTokenSymbol,s.parentTokenSymbol==B.env.NEXT_PUBLIC_FIRST_PARENT_TOKEN_SYMBOL&&(0,r.jsxs)(T(),{href:"/dex/swap?from=".concat(s.parentTokenSymbol,"&to=").concat(B.env.NEXT_PUBLIC_NATIVE_TOKEN_SYMBOL),className:"text-secondary ml-1",children:["（转回 ",B.env.NEXT_PUBLIC_NATIVE_TOKEN_SYMBOL,"）"]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 mx-4 mt-4 mb-6"}),(0,r.jsx)(S.A,{isLoading:I||L,text:I?"提交交易...":"确认交易..."})]})};var w=n(62537);function L(){var e=(0,l.useContext)(c.N)||{token:null,setToken:null},s=e.token,n=e.setToken,x=(0,i.TU)(s?s.address:"0x0000000000000000000000000000000000000000"),u=x.launchInfo,h=x.isPending,N=x.error,j=(0,o.g)().handleContractError;return((0,l.useEffect)(()=>{N&&j(N,"launch")},[N]),(0,l.useEffect)(()=>{u&&s&&u.hasEnded&&!s.hasEnded&&n((0,a._)((0,t._)({},s),{hasEnded:!0}))},[u,s]),h||u)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{title:"公平发射"}),(0,r.jsxs)("main",{className:"flex-grow",children:[(0,r.jsx)(w.A,{}),h||!u?(0,r.jsx)(m.A,{}):(0,r.jsxs)(r.Fragment,{children:[s&&(u.hasEnded?(0,r.jsx)(I,{token:s,launchInfo:u}):(0,r.jsx)(A,{token:s,launchInfo:u})),(0,r.jsx)(v,{token:s,launchInfo:u})]})]})]}):(0,r.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})}},75695:(e,s,n)=>{"use strict";n.d(s,{A:()=>u});var t=n(16927),a=n(40854),r=n(4902),l=n(37876),c=n(14232),i=n(7446),o=n(95167),d=n(8047),m=n(44571),x=n(97685);function u(e){var s=e.tokenAddress,n=e.tokenSymbol,u=e.tokenDecimals,h=e.tokenImage,N=(0,a._)((0,c.useState)(!1),2),j=N[0],v=N[1],f=(0,d.F)().isConnected,g=(0,m.G)().data;return n.length>11?null:(0,l.jsx)("button",{onClick:()=>(0,t._)(function(){return(0,r.YH)(this,function(e){switch(e.label){case 0:if(!f)return alert("请先连接你的钱包"),[2];v(!0),e.label=1;case 1:if(e.trys.push([1,3,4,5]),!g)return alert("无法获取钱包客户端"),[2];return[4,g.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:s,symbol:n,decimals:u,image:h}}})];case 2:return e.sent()?x.Ay.success("代币已成功添加到 MetaMask 钱包"):x.Ay.error("用户拒绝添加代币"),[3,5];case 3:return console.error("添加代币失败:",e.sent()),x.Ay.error("添加代币失败，请检查控制台以获取更多信息"),[3,5];case 4:return v(!1),[7];case 5:return[2]}})})(),disabled:j,className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",children:j?(0,l.jsx)(i.A,{className:"h-4 w-4 animate-spin"}):(0,l.jsx)(o.A,{className:"h-4 w-4 text-greyscale-500"})})}},87577:(e,s,n)=>{"use strict";n.d(s,{A:()=>m});var t=n(40854),a=n(37876),r=n(14232),l=n(48447),c=n(33276),i=n(70801),o=n(97685),d=n(20442);let m=e=>{var s=e.address,n=e.word,m=e.showCopyButton,x=e.showAddress,u=void 0===x||x,h=e.colorClassName,N=void 0===h?"":h,j=e.colorClassName2,v=void 0===j?"":j,f=(0,t._)((0,r.useState)(!1),2),g=f[0],p=f[1];return(0,a.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[n&&(0,a.jsx)("span",{className:"text-xs",children:n}),u&&!v&&(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=N?N:"text-greyscale-500"),children:(0,d.W_)(s)}),u&&v&&(0,a.jsxs)("span",{className:"text-[0px]",children:[(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=N?N:"text-greyscale-500"),children:"".concat(s.substring(0,6),"...")}),(0,a.jsx)("span",{className:"font-mono text-xs ".concat(v),children:"".concat(s.substring(s.length-4))})]}),(void 0===m||m)&&(0,a.jsx)(l.CopyToClipboard,{text:s,onCopy:(e,s)=>{s?p(!0):o.Ay.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-1 rounded hover:bg-gray-200 focus:outline-none",onClick:e=>{e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",children:g?(0,a.jsx)(c.A,{className:"h-4 w-4 ".concat(null!=N?N:"text-greyscale-500")}):(0,a.jsx)(i.A,{className:"h-4 w-4 ".concat(null!=N?N:"text-greyscale-500")})})})]})}}},e=>{e.O(0,[3308,4243,4571,5701,5060,154,5498,5139,3356,2537,636,6593,8792],()=>e(e.s=8917)),_N_E=e.O()}]);