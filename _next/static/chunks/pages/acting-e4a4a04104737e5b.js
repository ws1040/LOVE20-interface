try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a0323d11-c692-451b-b8eb-2886c0fa9c27",e._sentryDebugIdIdentifier="sentry-dbid-a0323d11-c692-451b-b8eb-2886c0fa9c27")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9082],{87869:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/acting",function(){return n(57949)}])},82950:function(e,t,n){"use strict";n.d(t,{Ol:function(){return d},SZ:function(){return u},Zb:function(){return l},aY:function(){return x},eW:function(){return m},ll:function(){return o}});var s=n(72253),r=n(47702),a=n(85893),c=n(67294),i=n(80513),l=c.forwardRef(function(e,t){var n=e.className,c=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n)},c))});l.displayName="Card";var d=c.forwardRef(function(e,t){var n=e.className,c=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",n)},c))});d.displayName="CardHeader";var o=c.forwardRef(function(e,t){var n=e.className,c=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",n)},c))});o.displayName="CardTitle";var u=c.forwardRef(function(e,t){var n=e.className,c=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n)},c))});u.displayName="CardDescription";var x=c.forwardRef(function(e,t){var n=e.className,c=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("p-6 pt-0",n)},c))});x.displayName="CardContent";var m=c.forwardRef(function(e,t){var n=e.className,c=(0,r._)(e,["className"]);return(0,a.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",n)},c))});m.displayName="CardFooter"},25287:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var s=(0,n(1462).Z)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},761:function(e,t,n){"use strict";var s=n(85893),r=n(45197);t.Z=function(){return(0,s.jsx)(r.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},54830:function(e,t,n){"use strict";var s=n(91309),r=n(85893),a=n(67294),c=n(82063),i=n(41192),l=n(67078),d=n(761),o=n(34155);t.Z=function(e){var t=e.currentRound,n=e.roundType,u=e.showCountdown,x=(0,c.O)().data,m=(0,a.useContext)(i.M),f=m?m.token:void 0,N=!x||!f||void 0===f.voteOriginBlocks,h=(0,s._)((0,a.useState)(BigInt(0)),2),v=h[0],j=h[1],g=Number("120")||0,b=Number(o.env.NEXT_PUBLIC_BLOCK_TIME_MS)||0,p=f?Number(f.voteOriginBlocks):0,y=g-(Number(x)-p)%g,_=y>0?Math.ceil(y*b/1e3):0,B=(0,s._)((0,a.useState)(_),2),I=B[0],w=B[1];(0,a.useEffect)(function(){if(x){var e=g-(Number(x)-p)%g;w(e>0?Math.ceil(e*b/1e3):0)}},[x,g,b,p]),(0,a.useEffect)(function(){t>BigInt(0)&&j(t)},[t]);var C=null!=v?v.toString():"0";return v<=BigInt(0)?(0,r.jsx)(r.Fragment,{}):N||null==v||v<BigInt(0)?(null==v||BigInt(0),(0,r.jsx)(d.Z,{})):(0,r.jsx)("div",{className:"flex items-center mb-3",children:(0,r.jsxs)("span",{className:"text-sm text-greyscale-400",children:["( 第",(0,r.jsx)("span",{className:"text-greyscale-400",children:C}),"轮","vote"===n?"投票":"verify"===n?"验证":"行动","阶段，",(0,r.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,r.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(1e3*I/b)}),(0,r.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===u||u?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{initialTimeLeft:_,onTick:w})}):(0,r.jsx)("span",{className:"text-greyscale-400",children:I<60?"".concat(I,"秒"):I<=300?"".concat(Math.floor(I/60),"分钟").concat(I%60,"秒"):I<3600?"".concat(Math.floor(I/60),"分钟"):"".concat(Math.floor(I/3600),"小时").concat(Math.floor(I%3600/60),"分钟")}),(0,r.jsx)("span",{className:"text-greyscale-400",children:" )"})]})})}},56566:function(e,t,n){"use strict";n.d(t,{Cn:function(){return l},IS:function(){return c},Tn:function(){return i},iF:function(){return d}});var s=n(99019),r=n(30460),a=n(34155),c=function(e,t,n){if(!e||!t)return"0%";var c=31536e6/Number(a.env.NEXT_PUBLIC_BLOCK_TIME_MS||0),i=(0,r.Zu)("120");if(0===c||i===BigInt(0))return"0%";var l=(t*BigInt(2)||BigInt(0))+(n||BigInt(0));if(l===BigInt(0))return"0%";var d=Number(e)/Number(l)/(Number(i)/c)*100;return(0,s.rl)(d)},i=function(e,t){if(!e||!t||t===BigInt(0))return"∞";var n=31536e6/Number(a.env.NEXT_PUBLIC_BLOCK_TIME_MS||0),c=(0,r.Zu)("120");if(0===n||c===BigInt(0))return"0%";var i=Number(e)/Number(t)/(Number(c)/n)*100;return(0,s.rl)(i)},l=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=Number("120")||0,r=Number(a.env.NEXT_PUBLIC_BLOCK_TIME_MS)||0,c=e*s,i=Math.ceil(c*r/100);t=i>=86400?"".concat(Math.ceil(i/86400),"天"):i>=3600?"".concat(Math.ceil(i/3600),"小时"):"".concat(Math.ceil(i/60),"分钟");var l="".concat(c.toLocaleString(),"区块，约").concat(t);return n||(l="".concat(e,"个阶段（").concat(l,")")),l},d=function(e,t){if(!e)return BigInt(0);var n=BigInt(1e3)-(0,r.Zu)("1")-(0,r.Zu)("1");return BigInt(0),t<=BigInt(1)?e*(0,r.Zu)("1")/BigInt(1e3):e*n*(0,r.Zu)("1")/BigInt(1e6)}},57949:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var s=n(85893),r=n(67294),a=n(20975),c=n(1504),i=n(41664),l=n.n(i),d=n(761),o=n(41192),u=n(99522),x=n(907),m=n(81337),f=n(99019),N=n(56566),h=function(e){e.currentRound;var t=((0,r.useContext)(o.M)||{}).token,n=(0,x.hS)((null==t?void 0:t.address)||"","0x8CcBd2F82ce3Cd32acd6711f54521421F9bbb58B"),a=n.balance,c=n.isPending,i=n.error,l=(0,m.XQ)((null==t?void 0:t.address)||""),h=l.reward,v=l.isPending,j=l.error,g=(0,u.S)().handleContractError;return(0,r.useEffect)(function(){i&&g(i,"join"),j&&g(j,"dataViewer")},[i,j]),(0,s.jsx)("div",{className:"px-4",children:(0,s.jsxs)("div",{className:"w-full border rounded-lg p-0",children:[(0,s.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,s.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,s.jsx)("div",{className:"stat-title text-sm pb-1",children:"参与行动代币总数"}),(0,s.jsx)("div",{className:"stat-value text-xl text-secondary",children:c?(0,s.jsx)(d.Z,{}):(0,f.LH)(null!=a?a:BigInt(0))})]}),(0,s.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,s.jsx)("div",{className:"stat-title text-sm pb-1",children:"预计新增铸币"}),(0,s.jsx)("div",{className:"stat-value text-xl text-secondary",children:v?(0,s.jsx)(d.Z,{}):(0,f.LH)(null!=h?h:BigInt(0))})]})]}),(0,s.jsxs)("div",{className:"text-center text-xs mb-2 text-greyscale-500",children:["预估年化收益率（APY）：",c||v?(0,s.jsx)(d.Z,{}):(0,N.Tn)(h,a)]})]})})},v=n(81231),j=n(25287),g=n(20245),b=n(82950),p=n(27431),y=n(54653),_=n(54830),B=n(41944),I=n(25223),w=function(e){var t=e.currentRound,n=((0,r.useContext)(o.M)||{}).token,c=(0,a.m)().address,i=(0,p.jA)((null==n?void 0:n.address)||"",t||BigInt(0),c),x=i.joinableActions,m=i.isPending,h=i.error,v=(0,y.CY)((null==n?void 0:n.address)||""),w=v.rewardAvailable,C=v.isPending,Z=v.error,M=(null==x?void 0:x.reduce(function(e,t){return e+t.votesNum},BigInt(0)))||BigInt(0),E=n?t-BigInt(n.initialStakeRound)+BigInt(1):BigInt(0),T=(0,N.iF)(w,E),k=(0,u.S)().handleContractError;return(0,r.useEffect)(function(){h&&k(h,"dataViewer"),Z&&k(Z,"mint")},[h,Z]),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsx)(B.Z,{title:"本轮可参与的行动："}),(0,s.jsx)(_.Z,{currentRound:t,roundType:"act"}),!c&&(0,s.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"}),c&&m&&(0,s.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,s.jsx)(d.Z,{})}),c&&!m&&!(null==x?void 0:x.length)&&(0,s.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮暂无行动"}),!m&&x&&x.length>0&&(0,s.jsx)("div",{className:"mt-2 space-y-4",children:null==x?void 0:x.sort(function(e,t){var n=Number(e.votesNum);return Number(t.votesNum)-n}).map(function(e,t){var r=Number(M)>0?Number(x[t].votesNum||BigInt(0))/Number(M):0,a="/action/info?id=".concat(e.action.head.id,"&symbol=").concat(null==n?void 0:n.symbol);return(0,s.jsx)(b.Zb,{className:"shadow-none",children:(0,s.jsxs)(l(),{href:a,className:"relative block",children:[(0,s.jsx)(b.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-between items-baseline",children:(0,s.jsxs)("div",{className:"flex items-baseline",children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-sm",children:"No."}),(0,s.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,s.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.title)})]})}),(0,s.jsxs)(b.aY,{className:"px-3 pt-1 pb-2",children:[(0,s.jsx)("div",{className:"flex justify-between text-sm",children:(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(j.Z,{className:"text-greyscale-400 mr-1 h-3 w-3"}),(0,s.jsx)("span",{className:"text-greyscale-400",children:(0,s.jsx)(I.Z,{address:x[t].action.head.author,showCopyButton:!1})})]})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"投票占"}),(0,s.jsx)("span",{className:"text-secondary text-xs",children:(0,f.rl)(100*r)})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"参与代币"}),(0,s.jsx)("span",{className:"text-secondary text-xs",children:(0,f.LH)(e.joinedAmount)})]}),e.hasReward?(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"APY"}),(0,s.jsx)("span",{className:"text-secondary text-xs",children:C?(0,s.jsx)(d.Z,{}):(0,N.Tn)(BigInt(Math.floor(Number(T||BigInt(0))*r)),x[t].joinedAmount)})]}):(0,s.jsx)("span",{className:"flex justify-between text-error text-sm",children:"无铸币激励"})]})]}),(0,s.jsx)(g.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id)})})]})},C=n(42281),Z=n(81975),M=function(){var e=(0,a.m)().isConnected,t=((0,r.useContext)(o.M)||{}).token,n=e&&(null==t?void 0:t.hasEnded)===!0&&(null==t?void 0:t.hasEnded),i=(0,Z.Bk)(n),x=i.currentRound,m=i.error,f=i.isPending,N=(0,u.S)().handleContractError;return((0,r.useEffect)(function(){m&&N(m,"join")},[m]),n&&f)?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(d.Z,{})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{title:"社区首页"}),(0,s.jsx)("main",{className:"flex-grow",children:e?t?t&&!t.hasEnded?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Z,{}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,s.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"公平发射未结束，还不能参与社区行动"}),(0,s.jsx)(c.z,{className:"w-1/2",asChild:!0,children:(0,s.jsx)(l(),{href:"/launch?symbol=".concat(t.symbol),children:"查看公平发射"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{currentRound:x}),(0,s.jsx)(w,{currentRound:x})]}):(0,s.jsx)(d.Z,{}):(0,s.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,s.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})})]})}}},function(e){e.O(0,[7395,6457,8545,6143,5476,8700,1985,7431,8430,4653,9891,2888,9774,179],function(){return e(e.s=87869)}),_N_E=e.O()}]);