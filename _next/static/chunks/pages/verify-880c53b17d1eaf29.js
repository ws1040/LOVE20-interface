(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1687],{1709:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(37876);let r=e=>{var s=e.title;return(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("h1",{className:"text-lg font-bold",children:s})})}},12293:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var t=a(37876),r=a(7446);let n=()=>(0,t.jsx)(r.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,s,a)=>{"use strict";a.d(s,{X:()=>n});var t=a(76200);class r extends t.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,s){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new r({value:e});let[a,t="0"]=e.split("."),n=a.startsWith("-");if(n&&(a=a.slice(1)),t=t.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${t}`))&&(a=`${BigInt(a)+1n}`),t="";else if(t.length>s){let[e,r,n]=[t.slice(0,s-1),t.slice(s-1,s),t.slice(s)],l=Math.round(Number(`${r}.${n}`));(t=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>s&&(t=t.slice(1),a=`${BigInt(a)+1n}`),t=t.slice(0,s)}else t=t.padEnd(s,"0");return BigInt(`${n?"-":""}${a}${t}`)}},28638:(e,s,a)=>{"use strict";a.d(s,{BT:()=>m,Wu:()=>u,ZB:()=>o,Zp:()=>i,aR:()=>d,wL:()=>x});var t=a(3576),r=a(65699),n=a(37876),l=a(14232),c=a(30684),i=l.forwardRef((e,s)=>{var a=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:s,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a)},l))});i.displayName="Card";var d=l.forwardRef((e,s)=>{var a=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:s,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",a)},l))});d.displayName="CardHeader";var o=l.forwardRef((e,s)=>{var a=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:s,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",a)},l))});o.displayName="CardTitle";var m=l.forwardRef((e,s)=>{var a=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:s,className:(0,c.cn)("text-sm text-muted-foreground",a)},l))});m.displayName="CardDescription";var u=l.forwardRef((e,s)=>{var a=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:s,className:(0,c.cn)("p-6 pt-0",a)},l))});u.displayName="CardContent";var x=l.forwardRef((e,s)=>{var a=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)("div",(0,t._)({ref:s,className:(0,c.cn)("flex items-center p-6 pt-0",a)},l))});x.displayName="CardFooter"},31464:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(37876),r=a(14232),n=a(29898),l=a(20451),c=a(60154),i=a(8047),d=a(14e3),o=a(96108),m=a(48230),u=a.n(m),x=a(44769),N=a(83416),f=a(28638),h=a(1709),v=a(12293),p=a(20442);let j=e=>{var s=e.currentRound,a=((0,r.useContext)(N.N)||{}).token,n=(0,i.F)().address,c=(0,d.useRouter)(),m=(0,x.XC)((null==a?void 0:a.address)||"",s||0n,n),j=m.myVerifyingActions,y=m.isPending,g=m.error,b=(0,l.g)().handleContractError;if((0,r.useEffect)(()=>{g&&b(g,"dataviewer")},[g]),j&&1===j.length){var w=j[0].action.head.id;return c.push("/verify/action?id=".concat(w,"&symbol=").concat(null==a?void 0:a.symbol,"&auto=true")),null}if(!a||y)return(0,t.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,t.jsx)(v.A,{})});console.log(j);var _=null==j?void 0:j.slice().sort((e,s)=>Number(e.action.head.id-s.action.head.id));return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)(h.A,{title:"我需验证的行动"}),!(null==_?void 0:_.length)&&(0,t.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"没有待验证行动"}),_&&_.length>0&&(0,t.jsx)("div",{className:"mt-4 space-y-4",children:_.map(e=>(0,t.jsx)(f.Zp,{className:"shadow-none",children:(0,t.jsxs)(u(),{className:"relative block",href:"/verify/action?id=".concat(e.action.head.id,"&symbol=").concat(null==a?void 0:a.symbol),children:[(0,t.jsxs)(f.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,t.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No.".concat(e.action.head.id)}),(0,t.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.title)})]}),(0,t.jsx)(f.Wu,{className:"px-3 pt-1 pb-2",children:(0,t.jsxs)("div",{className:"text-xs text-greyscale-400 mt-2 flex justify-between",children:[(0,t.jsxs)("span",{children:["总票数: ",(0,t.jsx)("span",{className:"text-secondary",children:(0,p.NJ)(e.totalVotesNum)})]}),(0,t.jsxs)("span",{children:["我的票数: ",(0,t.jsx)("span",{className:"text-secondary",children:(0,p.NJ)(e.myVotesNum)})]}),(0,t.jsxs)("span",{children:["我的占比:"," ",(0,t.jsx)("span",{className:"text-secondary",children:(0,p.Ee)(Number(10000n*e.myVotesNum/e.totalVotesNum)/100)})]})]})}),(0,t.jsx)(o.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id))})]})},y=()=>{var e=(0,n.vC)(),s=e.currentRound,a=e.error,i=(0,l.g)().handleContractError;return(0,r.useEffect)(()=>{a&&i(a,"verify")},[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.A,{title:"验证"}),(0,t.jsx)("main",{className:"flex-grow",children:(0,t.jsx)(j,{currentRound:s})})]})}},94513:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify",function(){return a(31464)}])}},e=>{e.O(0,[3308,7460,8230,154,3096,4769,9898,636,6593,8792],()=>e(e.s=94513)),_N_E=e.O()}]);