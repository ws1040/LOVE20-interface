(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2455],{1709:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(37876);let t=e=>{var s=e.title;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:s})})}},5006:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify/actions",function(){return a(19906)}])},12293:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var r=a(37876),t=a(7446);let n=()=>(0,r.jsx)(t.A,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})},18449:(e,s,a)=>{"use strict";a.d(s,{X:()=>n});var r=a(76200);class t extends r.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,s){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new t({value:e});let[a,r="0"]=e.split("."),n=a.startsWith("-");if(n&&(a=a.slice(1)),r=r.replace(/(0+)$/,""),0===s)1===Math.round(Number(`.${r}`))&&(a=`${BigInt(a)+1n}`),r="";else if(r.length>s){let[e,t,n]=[r.slice(0,s-1),r.slice(s-1,s),r.slice(s)],l=Math.round(Number(`${t}.${n}`));(r=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>s&&(r=r.slice(1),a=`${BigInt(a)+1n}`),r=r.slice(0,s)}else r=r.padEnd(s,"0");return BigInt(`${n?"-":""}${a}${r}`)}},19906:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var r=a(37876),t=a(14232),n=a(29898),l=a(4113),c=a(60154),i=a(8047),d=a(14e3),o=a(6960),m=a(96108),x=a(48230),u=a.n(x),N=a(44769),f=a(83416),h=a(28638),v=a(1709),p=a(12293),j=a(20442);let g=e=>{var s,a=e.currentRound,n=((0,t.useContext)(f.N)||{}).token,c=(0,i.F)().address;(0,d.useRouter)();var x=(0,N.qL)((null==n?void 0:n.address)||"",a,c),g=x.verifyingActions,y=x.isPending,b=x.error,w=(0,l.g)().handleContractError;return((0,t.useEffect)(()=>{b&&w(b,"dataviewer")},[b]),!n||y)?(0,r.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,r.jsx)(p.A,{})}):(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)(v.A,{title:"所有验证中行动"}),(0,r.jsx)(o.$,{variant:"outline",size:"sm",className:"text-secondary border-secondary",asChild:!0,children:(0,r.jsx)(u(),{href:"/gov?symbol=".concat(null==n?void 0:n.symbol),children:"返回治理首页"})})]}),!(null==g?void 0:g.length)&&(0,r.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮没有行动要验证"}),g&&g.length>0&&(0,r.jsx)("div",{className:"mt-4 space-y-4",children:null==g||null==(s=g.sort((e,s)=>{var a=BigInt(e.action.head.id),r=BigInt(s.action.head.id);return a<r?-1:+(a>r)}))?void 0:s.map(e=>(0,r.jsx)(h.Zp,{className:"shadow-none",children:(0,r.jsxs)(u(),{className:"relative block",href:"/verify/action?id=".concat(e.action.head.id,"&symbol=").concat(null==n?void 0:n.symbol),children:[(0,r.jsxs)(h.aR,{className:"px-3 pt-2 pb-1 flex-row justify-start items-baseline",children:[(0,r.jsx)("span",{className:"text-greyscale-400 text-sm mr-1",children:"No."}),(0,r.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,r.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.title)})]}),(0,r.jsx)(h.Wu,{className:"px-3 pt-1 pb-2",children:(0,r.jsxs)("div",{className:"text-xs mt-2 flex justify-between",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-greyscale-400 mr-1",children:"投票数"}),(0,r.jsxs)("span",{className:"text-secondary",children:[" ",(0,j.NJ)(e.votesNum)]})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-greyscale-400 mr-1",children:"已验证票数"}),(0,r.jsxs)("span",{className:"text-secondary",children:[" ",(0,j.NJ)(e.verificationScore)]})]}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-greyscale-400 mr-1",children:"进度"}),(0,r.jsx)("span",{className:"text-secondary",children:e.votesNum>0n?"".concat(Number(100n*e.verificationScore/e.votesNum),"%"):"0%"})]})]})}),(0,r.jsx)(m.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id))})]})},y=()=>{var e=(0,n.vC)(),s=e.currentRound,a=e.error,i=(0,l.g)().handleContractError;return(0,t.useEffect)(()=>{a&&i(a,"verify")},[a]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{title:"验证中的行动"}),(0,r.jsx)("main",{className:"flex-grow",children:(0,r.jsx)(g,{currentRound:s})})]})}},28638:(e,s,a)=>{"use strict";a.d(s,{BT:()=>m,Wu:()=>x,ZB:()=>o,Zp:()=>i,aR:()=>d,wL:()=>u});var r=a(3576),t=a(65699),n=a(37876),l=a(14232),c=a(30684),i=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a)},l))});i.displayName="Card";var d=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",a)},l))});d.displayName="CardHeader";var o=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",a)},l))});o.displayName="CardTitle";var m=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("text-sm text-muted-foreground",a)},l))});m.displayName="CardDescription";var x=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("p-6 pt-0",a)},l))});x.displayName="CardContent";var u=l.forwardRef((e,s)=>{var a=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("flex items-center p-6 pt-0",a)},l))});u.displayName="CardFooter"}},e=>{e.O(0,[3308,7460,8230,154,5498,4769,9898,636,6593,8792],()=>e(e.s=5006)),_N_E=e.O()}]);