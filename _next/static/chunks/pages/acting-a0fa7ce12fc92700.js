try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4732c950-1af0-436c-acfd-ab70fadf6e58",e._sentryDebugIdIdentifier="sentry-dbid-4732c950-1af0-436c-acfd-ab70fadf6e58")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9082],{87869:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/acting",function(){return n(75959)}])},34680:function(e,t,n){"use strict";n.d(t,{Ol:function(){return d},SZ:function(){return u},Zb:function(){return l},aY:function(){return x},eW:function(){return m},ll:function(){return o}});var s=n(72253),a=n(47702),r=n(85893),c=n(67294),i=n(40108),l=c.forwardRef(function(e,t){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n)},c))});l.displayName="Card";var d=c.forwardRef(function(e,t){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",n)},c))});d.displayName="CardHeader";var o=c.forwardRef(function(e,t){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",n)},c))});o.displayName="CardTitle";var u=c.forwardRef(function(e,t){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n)},c))});u.displayName="CardDescription";var x=c.forwardRef(function(e,t){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("p-6 pt-0",n)},c))});x.displayName="CardContent";var m=c.forwardRef(function(e,t){var n=e.className,c=(0,a._)(e,["className"]);return(0,r.jsx)("div",(0,s._)({ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",n)},c))});m.displayName="CardFooter"},24920:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var s=(0,n(31134).Z)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},42083:function(e,t,n){"use strict";var s=n(85893),a=n(23432);t.Z=function(){return(0,s.jsx)(a.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},21338:function(e,t,n){"use strict";var s=n(91309),a=n(85893),r=n(67294),c=n(88504),i=n(93778),l=n(74089),d=n(42083);t.Z=function(e){var t=e.currentRound,n=e.roundType,o=e.showCountdown,u=(0,c.O)().data,x=(0,r.useContext)(i.M),m=x?x.token:void 0,f=!u||!m||void 0===m.voteOriginBlocks,h=(0,s._)((0,r.useState)(BigInt(0)),2),N=h[0],j=h[1],v=Number("30126")||0,g=Number("2868")||0,p=m?Number(m.voteOriginBlocks):0,b=v-(Number(u)-p)%v,y=b>0?Math.ceil(b*g/1e3):0,w=(0,s._)((0,r.useState)(y),2),B=w[0],I=w[1];(0,r.useEffect)(function(){if(u){var e=v-(Number(u)-p)%v;I(e>0?Math.ceil(e*g/1e3):0)}},[u,v,g,p]),(0,r.useEffect)(function(){t>BigInt(0)&&j(t)},[t]);var Z=null!=N?N.toString():"0";return N<=BigInt(0)?(0,a.jsx)(a.Fragment,{}):f||null==N||N<BigInt(0)?(null==N||BigInt(0),(0,a.jsx)(d.Z,{})):(0,a.jsx)("div",{className:"flex items-center mb-3",children:(0,a.jsxs)("span",{className:"text-sm text-greyscale-400",children:["( 第",(0,a.jsx)("span",{className:"text-greyscale-400",children:Z}),"轮","vote"===n?"投票":"verify"===n?"验证":"行动","阶段，",(0,a.jsx)("span",{className:"text-greyscale-400",children:"剩余"}),(0,a.jsx)("span",{className:"text-greyscale-400",children:Math.ceil(1e3*B/g)}),(0,a.jsx)("span",{className:"text-greyscale-400 mr-1",children:"块, 约"}),void 0===o||o?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.Z,{initialTimeLeft:y,onTick:I})}):(0,a.jsx)("span",{className:"text-greyscale-400",children:B<60?"".concat(B,"秒"):B<=300?"".concat(Math.floor(B/60),"分钟").concat(B%60,"秒"):B<3600?"".concat(Math.floor(B/60),"分钟"):"".concat(Math.floor(B/3600),"小时").concat(Math.floor(B%3600/60),"分钟")}),(0,a.jsx)("span",{className:"text-greyscale-400",children:" )"})]})})}},99958:function(e,t,n){"use strict";n.d(t,{Cn:function(){return i},IS:function(){return r},Tn:function(){return c},iF:function(){return l}});var s=n(91529),a=n(37742),r=function(e,t,n){if(!e||!t)return"0%";var r=31536e6/Number("2868"),c=(0,a.Zu)("30126");if(0===r||c===BigInt(0))return"0%";var i=(t*BigInt(2)||BigInt(0))+(n||BigInt(0));if(i===BigInt(0))return"0%";var l=Number(e)/Number(i)/(Number(c)/r)*100;return(0,s.rl)(l)},c=function(e,t){if(!e||!t||t===BigInt(0))return"∞";var n=31536e6/Number("2868"),r=(0,a.Zu)("30126");if(0===n||r===BigInt(0))return"0%";var c=Number(e)/Number(t)/(Number(r)/n)*100;return(0,s.rl)(c)},i=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=Number("30126")||0,a=Number("2868")||0,r=e*s,c=Math.ceil(r*a/100);t=c>=86400?"".concat(Math.ceil(c/86400),"天"):c>=3600?"".concat(Math.ceil(c/3600),"小时"):"".concat(Math.ceil(c/60),"分钟");var i="".concat(r.toLocaleString(),"区块，约").concat(t);return n||(i="".concat(e,"个阶段（").concat(i,")")),i},l=function(e,t){if(!e)return BigInt(0);var n=BigInt(1e3)-(0,a.Zu)("1")-(0,a.Zu)("1");return BigInt(0),t<=BigInt(1)?e*(0,a.Zu)("1")/BigInt(1e3):e*n*(0,a.Zu)("1")/BigInt(1e6)}},75959:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var s=n(85893),a=n(67294),r=n(42130),c=n(27245),i=n(41664),l=n.n(i),d=n(42083),o=n(93778),u=n(73591),x=n(85794),m=n(7208),f=n(91529),h=n(99958),N=function(e){e.currentRound;var t=((0,a.useContext)(o.M)||{}).token,n=(0,x.hS)((null==t?void 0:t.address)||"","0xACea4f086BE05BeA47f3A56788FA3919C7f40799"),r=n.balance,c=n.isPending,i=n.error,l=(0,m.XQ)((null==t?void 0:t.address)||""),N=l.reward,j=l.isPending,v=l.error,g=(0,u.S)().handleContractError;return(0,a.useEffect)(function(){i&&g(i,"join"),v&&g(v,"dataViewer")},[i,v]),(0,s.jsx)("div",{className:"px-4",children:(0,s.jsxs)("div",{className:"w-full border rounded-lg p-0",children:[(0,s.jsxs)("div",{className:"stats w-full grid grid-cols-2 divide-x-0",children:[(0,s.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,s.jsx)("div",{className:"stat-title text-sm pb-1",children:"参与行动代币总数"}),(0,s.jsx)("div",{className:"stat-value text-xl text-secondary",children:c?(0,s.jsx)(d.Z,{}):(0,f.LH)(null!=r?r:BigInt(0))})]}),(0,s.jsxs)("div",{className:"stat place-items-center pb-2",children:[(0,s.jsx)("div",{className:"stat-title text-sm pb-1",children:"预计新增铸币"}),(0,s.jsx)("div",{className:"stat-value text-xl text-secondary",children:j?(0,s.jsx)(d.Z,{}):(0,f.LH)(null!=N?N:BigInt(0))})]})]}),(0,s.jsxs)("div",{className:"text-center text-xs mb-2 text-greyscale-500",children:["预估年化收益率（APY）：",c||j?(0,s.jsx)(d.Z,{}):(0,h.Tn)(N,r)]})]})})},j=n(83494),v=n(24920),g=n(4307),p=n(34680),b=n(93950),y=n(7399),w=n(21338),B=n(64777),I=n(27460),Z=function(e){var t=e.currentRound,n=((0,a.useContext)(o.M)||{}).token,c=(0,r.m)().address,i=(0,b.jA)((null==n?void 0:n.address)||"",t||BigInt(0),c),x=i.joinableActions,m=i.isPending,N=i.error,j=(0,y.CY)((null==n?void 0:n.address)||""),Z=j.rewardAvailable,_=j.isPending,C=j.error,k=(null==x?void 0:x.reduce(function(e,t){return e+t.votesNum},BigInt(0)))||BigInt(0),E=n?t-BigInt(n.initialStakeRound)+BigInt(1):BigInt(0),M=(0,h.iF)(Z,E),R=(0,u.S)().handleContractError;return(0,a.useEffect)(function(){N&&R(N,"dataViewer"),C&&R(C,"mint")},[N,C]),(0,s.jsxs)("div",{className:"px-4 py-6",children:[(0,s.jsx)(B.Z,{title:"本轮可参与的行动："}),(0,s.jsx)(w.Z,{currentRound:t,roundType:"act"}),!c&&(0,s.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"请先连接钱包"}),c&&m&&(0,s.jsx)("div",{className:"p-4 flex justify-center items-center",children:(0,s.jsx)(d.Z,{})}),c&&!m&&!(null==x?void 0:x.length)&&(0,s.jsx)("div",{className:"text-sm mt-4 text-greyscale-500 text-center",children:"本轮暂无行动"}),!m&&x&&x.length>0&&(0,s.jsx)("div",{className:"mt-2 space-y-4",children:null==x?void 0:x.sort(function(e,t){var n=Number(e.votesNum);return Number(t.votesNum)-n}).map(function(e,t){var a=Number(k)>0?Number(x[t].votesNum||BigInt(0))/Number(k):0,r="/action/info?id=".concat(e.action.head.id,"&symbol=").concat(null==n?void 0:n.symbol);return(0,s.jsx)(p.Zb,{className:"shadow-none",children:(0,s.jsxs)(l(),{href:r,className:"relative block",children:[(0,s.jsx)(p.Ol,{className:"px-3 pt-2 pb-1 flex-row justify-between items-baseline",children:(0,s.jsxs)("div",{className:"flex items-baseline",children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-sm",children:"No."}),(0,s.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:String(e.action.head.id)}),(0,s.jsx)("span",{className:"font-bold text-greyscale-800",children:"".concat(e.action.body.title)})]})}),(0,s.jsxs)(p.aY,{className:"px-3 pt-1 pb-2",children:[(0,s.jsx)("div",{className:"flex justify-between text-sm",children:(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(v.Z,{className:"text-greyscale-400 mr-1 h-3 w-3"}),(0,s.jsx)("span",{className:"text-greyscale-400",children:(0,s.jsx)(I.Z,{address:x[t].action.head.author,showCopyButton:!1})})]})}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"投票占"}),(0,s.jsx)("span",{className:"text-secondary text-xs",children:(0,f.rl)(100*a)})]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"参与代币"}),(0,s.jsx)("span",{className:"text-secondary text-xs",children:(0,f.LH)(e.joinedAmount)})]}),e.hasReward?(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"text-greyscale-400 text-xs mr-1",children:"APY"}),(0,s.jsx)("span",{className:"text-secondary text-xs",children:_?(0,s.jsx)(d.Z,{}):(0,h.Tn)(BigInt(Math.floor(Number(M||BigInt(0))*a)),x[t].joinedAmount)})]}):(0,s.jsx)("span",{className:"flex justify-between text-error text-sm",children:"无铸币激励"})]})]}),(0,s.jsx)(g.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-greyscale-400 pointer-events-none"})]})},e.action.head.id)})})]})},_=n(66247),C=n(20442),k=function(){var e=(0,r.m)().isConnected,t=((0,a.useContext)(o.M)||{}).token,n=e&&(null==t?void 0:t.hasEnded)===!0&&(null==t?void 0:t.hasEnded),i=(0,C.Bk)(n),x=i.currentRound,m=i.error,f=i.isPending,h=(0,u.S)().handleContractError;return((0,a.useEffect)(function(){m&&h(m,"join")},[m]),n&&f)?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)(d.Z,{})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.Z,{title:"社区首页"}),(0,s.jsx)("main",{className:"flex-grow",children:e?t?t&&!t.hasEnded?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{}),(0,s.jsxs)("div",{className:"flex flex-col items-center p-4 mt-4",children:[(0,s.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"公平发射未结束，还不能参与社区行动"}),(0,s.jsx)(c.z,{className:"w-1/2",asChild:!0,children:(0,s.jsx)(l(),{href:"/launch?symbol=".concat(t.symbol),children:"查看公平发射"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N,{currentRound:x}),(0,s.jsx)(Z,{currentRound:x})]}):(0,s.jsx)(d.Z,{}):(0,s.jsx)("div",{className:"flex flex-col items-center p-4 mt-4",children:(0,s.jsx)("div",{className:"text-center mb-4 text-greyscale-500",children:"没有链接钱包，请先连接钱包"})})})]})}}},function(e){e.O(0,[8239,367,246,6143,9443,3494,2252,3950,6127,7399,7616,2888,9774,179],function(){return e(e.s=87869)}),_N_E=e.O()}]);