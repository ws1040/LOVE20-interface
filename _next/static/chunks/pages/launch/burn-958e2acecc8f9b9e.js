try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7784da77-a964-4b32-a347-d1c88c44b203",e._sentryDebugIdIdentifier="sentry-dbid-7784da77-a964-4b32-a347-d1c88c44b203")}()}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5781],{65160:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch/burn",function(){return r(72587)}])},76929:function(e,n,r){"use strict";r.d(n,{l0:function(){return b},NI:function(){return I},pf:function(){return _},Wi:function(){return v},xJ:function(){return N},lX:function(){return j},zG:function(){return k}});var t=r(34788),s=r(12796),a=r(72253),i=r(14932),c=r(47702),o=r(85893),l=r(67294),d=r(88426),u=r(87536),m=r(40108),f=r(49102),x=(0,r(12003).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),h=l.forwardRef(function(e,n){var r=e.className,t=(0,c._)(e,["className"]);return(0,o.jsx)(f.f,(0,a._)({ref:n,className:(0,m.cn)(x(),r)},t))});h.displayName=f.f.displayName;var b=u.RV,p=l.createContext({}),v=function(e){var n=(0,t._)({},(0,s._)(e));return(0,o.jsx)(p.Provider,{value:{name:n.name},children:(0,o.jsx)(u.Qr,(0,a._)({},n))})},g=function(){var e=l.useContext(p),n=l.useContext(y),r=(0,u.Gc)(),t=r.getFieldState,s=r.formState,i=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");var c=n.id;return(0,a._)({id:c,name:e.name,formItemId:"".concat(c,"-form-item"),formDescriptionId:"".concat(c,"-form-item-description"),formMessageId:"".concat(c,"-form-item-message")},i)},y=l.createContext({}),N=l.forwardRef(function(e,n){var r=e.className,t=(0,c._)(e,["className"]),s=l.useId();return(0,o.jsx)(y.Provider,{value:{id:s},children:(0,o.jsx)("div",(0,a._)({ref:n,className:(0,m.cn)("space-y-2",r)},t))})});N.displayName="FormItem";var j=l.forwardRef(function(e,n){var r=e.className,t=(0,c._)(e,["className"]),s=g(),i=s.error,l=s.formItemId;return(0,o.jsx)(h,(0,a._)({ref:n,className:(0,m.cn)(i&&"text-destructive",r),htmlFor:l},t))});j.displayName="FormLabel";var I=l.forwardRef(function(e,n){var r=(0,t._)({},(0,s._)(e)),i=g(),c=i.error,l=i.formItemId,u=i.formDescriptionId,m=i.formMessageId;return(0,o.jsx)(d.g7,(0,a._)({ref:n,id:l,"aria-describedby":c?"".concat(u," ").concat(m):"".concat(u),"aria-invalid":!!c},r))});I.displayName="FormControl";var _=l.forwardRef(function(e,n){var r=e.className,t=(0,c._)(e,["className"]),s=g().formDescriptionId;return(0,o.jsx)("p",(0,a._)({ref:n,id:s,className:(0,m.cn)("text-sm text-muted-foreground",r)},t))});_.displayName="FormDescription";var k=l.forwardRef(function(e,n){var r=e.className,t=e.children,s=(0,c._)(e,["className","children"]),l=g(),d=l.error,u=l.formMessageId,f=d?String(null==d?void 0:d.message):t;return f?(0,o.jsx)("p",(0,i._)((0,a._)({ref:n,id:u,className:(0,m.cn)("text-sm font-medium text-destructive",r)},s),{children:f})):null});k.displayName="FormMessage"},72587:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return C}});var t=r(85893),s=r(67294),a=r(93778),i=r(70019),c=r(73591),o=r(11010),l=r(72253),d=r(14932),u=r(91309),m=r(97582),f=r(63448),x=r(56312),h=r(87536),b=r(42130),p=r(39360),v=r(86501),g=r(11163),y=r(27245),N=r(21774),j=r(76929),I=r(91529),_=r(85794),k=r(64777),w=r(42083),S=r(44576),T=function(e){var n,r=e.token;e.launchInfo;var a=(0,b.m)().address;(0,p.x)();var i=(0,g.useRouter)(),T=(0,_.hS)(null==r?void 0:r.address,a),B=T.balance,C=T.isPending,F=T.error,A=(0,_.hS)(null==r?void 0:r.parentTokenAddress,a),E=A.balance,M=(A.isPending,A.error),z=(0,_.hS)(null==r?void 0:r.parentTokenAddress,null==r?void 0:r.address),$=z.balance,P=(z.isPending,z.error),D=(0,_.A5)(null==r?void 0:r.address),R=D.totalSupply,L=(D.isPending,D.error),Z=(0,s.useMemo)(function(){return f.Ry({burnAmount:f.Z_().nonempty({message:"请输入销毁数量"}).refine(function(e){return Number(e)>0},{message:"销毁数量不能为0"})}).refine(function(e){if(!B)return!0;try{return!!(0,I.vz)(e.burnAmount)&&(0,I.vz)(e.burnAmount)<=B}catch(e){return!1}},{message:"销毁数量不能超过您的余额",path:["burnAmount"]})},[B]),H=(0,h.cI)({resolver:(0,x.F)(Z),defaultValues:{burnAmount:""},mode:"onChange"}),V=H.watch("burnAmount");(0,s.useMemo)(function(){try{return V?(0,I.vz)(V):BigInt(0)}catch(e){return BigInt(0)}},[V]);var G=(0,u._)((0,s.useState)(BigInt(0)),2),J=G[0],K=G[1];(0,s.useEffect)(function(){var e=H.getValues("burnAmount");R&&$&&e&&K((0,I.vz)(e)*$/R)},[H.watch("burnAmount"),R,$]);var W=(0,_.l3)(null==r?void 0:r.address),X=W.burnForParentToken,O=W.isPending,Q=W.isConfirming,q=W.isConfirmed,U=W.writeError,Y=(n=(0,o._)(function(e){return(0,m.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,X((0,I.vz)(e.burnAmount))];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)});(0,s.useEffect)(function(){q&&(v.Am.success("销毁成功"),setTimeout(function(){i.push("/my?symbol=".concat(null==r?void 0:r.symbol))},1e3))},[q,i,null==r?void 0:r.symbol]);var ee=(0,c.S)().handleContractError;return((0,s.useEffect)(function(){F&&ee(F,"token"),P&&ee(P,"token"),L&&ee(L,"token"),M&&ee(M,"token"),U&&ee(U,"token")},[F,P,L,M,U,ee]),!r||C)?(0,t.jsx)(w.Z,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)(k.Z,{title:"换回父币"}),(0,t.jsx)("div",{className:"stats w-full",children:(0,t.jsxs)("div",{className:"stat place-items-center",children:[(0,t.jsx)("div",{className:"stat-title text-sm mr-6",children:"父币托底池总量"}),(0,t.jsxs)("div",{className:"stat-value text-secondary mt-2",children:[(0,I.LH)($||BigInt(0)),(0,t.jsx)("span",{className:"text-greyscale-500 font-normal text-sm ml-2",children:r.parentTokenSymbol})]}),(0,t.jsxs)("div",{className:"stat-desc text-sm mt-2",children:["销毁 ",r.symbol,"，可从父币托底池取回 ",r.parentTokenSymbol]})]})}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)(j.l0,(0,d._)((0,l._)({},H),{children:(0,t.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[(0,t.jsxs)("div",{className:"flex items-center text-sm my-0",children:[(0,t.jsxs)("span",{className:"text-greyscale-400",children:["我的 ",r.symbol,": ",(0,t.jsx)("span",{className:"text-secondary",children:(0,I.LH)(B||BigInt(0))})]}),(0,t.jsx)(y.z,{variant:"link",size:"sm",onClick:function(){H.setValue("burnAmount",(0,I.bM)(B||BigInt(0)))},disabled:(B||BigInt(0))<=BigInt(0)||O||Q,className:"text-secondary",children:"最高"})]}),(0,t.jsx)(j.Wi,{control:H.control,name:"burnAmount",render:function(e){var n=e.field;return(0,t.jsxs)(j.xJ,{children:[(0,t.jsx)(j.NI,{children:(0,t.jsx)(N.I,(0,l._)({type:"number",placeholder:"请输入要销毁的 ".concat(r.symbol," 数量"),disabled:(B||BigInt(0))<=BigInt(0)||O||Q,className:"!ring-secondary-foreground"},n))}),(0,t.jsx)(j.zG,{})]})}}),(0,t.jsx)("div",{className:"flex items-center text-sm mt-1 mb-2",children:(0,t.jsxs)("span",{className:"text-greyscale-400",children:["预计可取回 ",(0,t.jsx)("span",{className:"text-secondary",children:(0,I.LH)(J)})," ",r.parentTokenSymbol]})}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(y.z,{className:"text-white py-2 rounded-lg",onClick:H.handleSubmit(Y),disabled:O||Q||q,children:O?"提交中...":Q?"确认中...":q?"交易成功":"销毁 ".concat(r.symbol,"，换回父币")})}),(0,t.jsxs)("div",{className:"flex items-center justify-center text-sm my-2",children:[(0,t.jsxs)("span",{className:"text-greyscale-400",children:["我的 ",r.parentTokenSymbol,":"," ",(0,t.jsx)("span",{className:"text-secondary",children:(0,I.LH)(E||BigInt(0))})," ",r.parentTokenSymbol]}),(0,t.jsx)(y.z,{variant:"link",size:"sm",onClick:function(){return i.push("/dex/swap?from=".concat(r.parentTokenSymbol,"&to=").concat("TKM20"==r.parentTokenSymbol?"TKM":"TKM20"))},className:"text-secondary ml-2",children:"去兑换"})]})]})})),(0,t.jsxs)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-4",children:[(0,t.jsx)("p",{className:"mb-1",children:"计算公式："}),(0,t.jsxs)("p",{children:["所得 ",r.parentTokenSymbol," 数量 = 底池 ",r.parentTokenSymbol," 总量 * (销毁 ",r.symbol," 数量 /"," ",r.symbol," 总发行量)"]})]})]})]}),(0,t.jsx)(S.Z,{isLoading:O||Q,text:O?"提交交易...":"确认交易..."})]})},B=r(83494);function C(){var e=((0,s.useContext)(a.M)||{}).token,n=(0,i.kF)(e?e.address:"0x0000000000000000000000000000000000000000"),r=n.launchInfo,o=n.isPending,l=n.error,d=(0,c.S)().handleContractError;return(0,s.useEffect)(function(){l&&d(l,"launch")},[l]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.Z,{title:"换回父币"}),(0,t.jsx)("main",{className:"flex-grow",children:o?(0,t.jsx)(w.Z,{}):r?(0,t.jsx)(T,{token:e,launchInfo:r}):(0,t.jsx)("div",{className:"text-red-500",children:"找不到发射信息"})})]})}},21803:function(e,n,r){"use strict";function t(e,n){let[r,t="0"]=e.split("."),s=r.startsWith("-");if(s&&(r=r.slice(1)),t=t.replace(/(0+)$/,""),0===n)1===Math.round(Number(`.${t}`))&&(r=`${BigInt(r)+1n}`),t="";else if(t.length>n){let[e,s,a]=[t.slice(0,n-1),t.slice(n-1,n),t.slice(n)],i=Math.round(Number(`${s}.${a}`));(t=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`).length>n&&(t=t.slice(1),r=`${BigInt(r)+1n}`),t=t.slice(0,n)}else t=t.padEnd(n,"0");return BigInt(`${s?"-":""}${r}${t}`)}r.d(n,{v:function(){return t}})}},function(e){e.O(0,[8239,367,1617,3494,2252,6127,6202,2888,9774,179],function(){return e(e.s=65160)}),_N_E=e.O()}]);