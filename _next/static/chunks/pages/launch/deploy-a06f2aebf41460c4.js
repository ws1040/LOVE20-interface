(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8245],{11372:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>P});var r=s(37876),t=s(60154),n=s(16927),l=s(3576),d=s(62701),o=s(40854),i=s(4902),c=s(22442),m=s(13810),u=s(88992),f=s(8047),N=s(1081),x=s(89099),v=s(14232),p=s(97685),_=s(77932),h=s(6960),g=s(13816),j=s(28638),b=s(92659),y=s(42038),w=s(20442),C=s(65575),I=s(40752),R=s(62288),E=s(4113),F=s(83416),A=s(12293),B=s(99574),L=s(99742),T=c.Ik({symbol:c.Yj().nonempty("请输入代币符号").length(6,"代币符号必须是 6 个字符").regex(/^[A-Z0-9]+$/,"只能使用大写字母 A~Z 和数字 0~9").regex(/^[A-Z]/,"必须以大写字母 A~Z 开头")});function $(){var e,a=(0,x.useRouter)(),s=((0,v.useContext)(F.N)||{}).token,t=(0,f.F)().address,c=(0,N.i)(),$=(0,o._)((0,v.useState)(""),2),P=$[0],k=$[1],M=(0,I.O2)(),O=M.launchToken,D=M.isPending,S=M.writeError,X=M.isConfirming,Z=M.isConfirmed,U=(0,I.Of)(s?s.address:"0x0000000000000000000000000000000000000000",t),z=U.remainingLaunchCount,H=U.isPending,G=(0,R.MZ)(s?s.address:"0x0000000000000000000000000000000000000000",t),V=G.numOfMintGovRewardByAccount,J=G.isPending,W=Number(L.env.NEXT_PUBLIC_MIN_GOV_REWARD_MINTS_TO_LAUNCH)||180n,Y=Number(W)-Number(null!=V?V:0)%Number(W),K=(0,E.g)().handleContractError;(0,v.useEffect)(()=>{S&&K(S,"launch")},[S,K]);var Q=(0,u.mN)({resolver:(0,m.u)(T),defaultValues:{symbol:""}});(0,v.useEffect)(()=>{if(Z){var e;a.push("/launch/?symbol=".concat(null!=(e=L.env.NEXT_PUBLIC_TOKEN_PREFIX)?e:"").concat(P))}},[Z,a,P]);var q=(0,o._)((0,v.useState)(!1),2),ee=q[0],ea=q[1],es=(0,o._)((0,v.useState)(null),2),er=es[0],et=es[1];if(!s||H||J)return(0,r.jsx)(A.A,{});var en=D||X;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(j.Zp,{className:"w-full border-none shadow-none rounded-none",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{className:"text-2xl font-bold text-center",children:"开启子币公平发射"}),(0,r.jsxs)(j.BT,{className:"text-center",children:["创建 ",(0,r.jsx)("span",{className:"text-secondary",children:s.symbol})," 的子币"]})]}),(0,r.jsx)(b.lV,(0,d._)((0,l._)({},Q),{children:(0,r.jsxs)("form",{onSubmit:Q.handleSubmit(function(e){return(0,n._)(function(){return(0,i.YH)(this,function(a){switch(a.label){case 0:if(!(0,y.z)(c))return p.oR.error("请切换到正确的网络"),[2];a.label=1;case 1:return a.trys.push([1,4,,5]),[4,new Promise((e,a)=>{et({resolve:e,reject:a}),ea(!0)})];case 2:if(!a.sent())return[2];return k(e.symbol),[4,O(e.symbol,null==s?void 0:s.address)];case 3:return a.sent(),[3,5];case 4:return console.error(a.sent()),[3,5];case 5:return[2]}})})()}),children:[(0,r.jsx)(j.Wu,{className:"space-y-4",children:(0,r.jsx)(b.zB,{control:Q.control,name:"symbol",render:e=>{var a=e.field;return(0,r.jsxs)(b.eI,{children:[(0,r.jsx)(b.lR,{children:"子币符号："}),(0,r.jsx)(b.MJ,{children:(0,r.jsx)(_.p,(0,l._)({id:"symbol",placeholder:"例如: TENNIS, FOOTBALL",disabled:en||Z,className:"!ring-secondary-foreground"},a))}),(0,r.jsx)(b.Rr,{children:"只能用大写字母A~Z和数字0~9，最多 6 个字符。"}),(0,r.jsx)(b.C5,{})]})}})}),(0,r.jsx)(j.wL,{className:"flex justify-center",children:(0,r.jsx)(h.$,{className:"w-1/2",type:"submit",disabled:en||Z,children:D?"提交中...":X?"确认中...":Z?"提交成功":"提交"})})]})})),(0,r.jsx)("div",{className:"bg-gray-100 text-greyscale-500 rounded-lg p-4 text-sm mt-0 m-6",children:(0,r.jsxs)("p",{children:["公平发射募集目标：",(0,w.NJ)((0,C.oQ)(null!=(e=L.env.NEXT_PUBLIC_PARENT_TOKEN_FUNDRAISING_GOAL)?e:"0")),"个"," ",null==s?void 0:s.symbol]})})]}),(0,r.jsx)(B.A,{isLoading:en,text:D?"提交交易...":"确认交易..."}),(0,r.jsx)(g.lG,{open:ee,onOpenChange:e=>{e||(null==er||er.resolve(!1),et(null)),ea(e)},children:(0,r.jsxs)(g.Cf,{children:[(0,r.jsxs)(g.c7,{children:[(0,r.jsx)(g.L3,{children:"确认开启子币发射"}),(0,r.jsxs)(g.rr,{children:["剩余可发射次数：",Number(z)," 次",(0,r.jsx)("br",{}),"再完成 ",Y," 次治理奖励铸币，可增加1次"]})]}),(0,r.jsxs)(g.Es,{children:[(0,r.jsx)(h.$,{variant:"outline",onClick:()=>{ea(!1),null==er||er.resolve(!1),et(null)},children:"取消"}),(0,r.jsx)(h.$,{onClick:()=>{ea(!1),null==er||er.resolve(!0),et(null)},children:"确认"})]})]})})]})}function P(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.A,{title:"开启子币"}),(0,r.jsx)("main",{className:"flex-grow",children:(0,r.jsx)($,{})})]})}},13816:(e,a,s)=>{"use strict";s.d(a,{Cf:()=>x,Es:()=>p,L3:()=>_,c7:()=>v,lG:()=>m,rr:()=>h,zM:()=>u});var r=s(3576),t=s(62701),n=s(65699),l=s(37876),d=s(14232),o=s(26303),i=s(70672),c=s(30684),m=o.bL,u=o.l9,f=o.ZL;o.bm;var N=d.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(o.hJ,(0,r._)({ref:a,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s)},t))});N.displayName=o.hJ.displayName;var x=d.forwardRef((e,a)=>{var s=e.className,d=e.children,m=(0,n._)(e,["className","children"]);return(0,l.jsxs)(f,{children:[(0,l.jsx)(N,{}),(0,l.jsxs)(o.UC,(0,t._)((0,r._)({ref:a,className:(0,c.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s)},m),{children:[d,(0,l.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(i.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});x.displayName=o.UC.displayName;var v=e=>{var a=e.className,s=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({className:(0,c.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a)},s))};v.displayName="DialogHeader";var p=e=>{var a=e.className,s=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,r._)({className:(0,c.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},s))};p.displayName="DialogFooter";var _=d.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(o.hE,(0,r._)({ref:a,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",s)},t))});_.displayName=o.hE.displayName;var h=d.forwardRef((e,a)=>{var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)(o.VY,(0,r._)({ref:a,className:(0,c.cn)("text-sm text-muted-foreground",s)},t))});h.displayName=o.VY.displayName},18449:(e,a,s)=>{"use strict";s.d(a,{X:()=>n});var r=s(76200);class t extends r.C{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function n(e,a){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new t({value:e});let[s,r="0"]=e.split("."),n=s.startsWith("-");if(n&&(s=s.slice(1)),r=r.replace(/(0+)$/,""),0===a)1===Math.round(Number(`.${r}`))&&(s=`${BigInt(s)+1n}`),r="";else if(r.length>a){let[e,t,n]=[r.slice(0,a-1),r.slice(a-1,a),r.slice(a)],l=Math.round(Number(`${t}.${n}`));(r=l>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${l}`).length>a&&(r=r.slice(1),s=`${BigInt(s)+1n}`),r=r.slice(0,a)}else r=r.padEnd(a,"0");return BigInt(`${n?"-":""}${s}${r}`)}},28638:(e,a,s)=>{"use strict";s.d(a,{BT:()=>m,Wu:()=>u,ZB:()=>c,Zp:()=>o,aR:()=>i,wL:()=>f});var r=s(3576),t=s(65699),n=s(37876),l=s(14232),d=s(30684),o=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},l))});o.displayName="Card";var i=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",s)},l))});i.displayName="CardHeader";var c=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",s)},l))});c.displayName="CardTitle";var m=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("text-sm text-muted-foreground",s)},l))});m.displayName="CardDescription";var u=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("p-6 pt-0",s)},l))});u.displayName="CardContent";var f=l.forwardRef((e,a)=>{var s=e.className,l=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,r._)({ref:a,className:(0,d.cn)("flex items-center p-6 pt-0",s)},l))});f.displayName="CardFooter"},42038:(e,a,s)=>{"use strict";s.d(a,{z:()=>l});var r=s(97685),t=s(99090),n=s(99742),l=e=>{var a,s=(()=>{var e,a,s=null==(a=t.$.chains)||null==(e=a[0])?void 0:e.id;if("number"==typeof s)return s;var r=Number(n.env.NEXT_PUBLIC_CHAIN_ID);return Number.isFinite(r)?r:void 0})();return!!e&&!!s&&e===s||(r.oR.error("请先将钱包链接 ".concat(null!=(a=n.env.NEXT_PUBLIC_CHAIN_NAME)?a:n.env.NEXT_PUBLIC_CHAIN)),!1)}},61720:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/launch/deploy",function(){return s(11372)}])},92659:(e,a,s)=>{"use strict";s.d(a,{lV:()=>v,MJ:()=>y,Rr:()=>w,zB:()=>_,eI:()=>j,lR:()=>b,C5:()=>C});var r=s(81110),t=s(40120),n=s(3576),l=s(62701),d=s(65699),o=s(37876),i=s(14232),c=s(82987),m=s(88992),u=s(30684),f=s(59773),N=(0,s(47137).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=i.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]);return(0,o.jsx)(f.b,(0,n._)({ref:a,className:(0,u.cn)(N(),s)},r))});x.displayName=f.b.displayName;var v=m.Op,p=i.createContext({}),_=e=>{var a=(0,r._)({},(0,t._)(e));return(0,o.jsx)(p.Provider,{value:{name:a.name},children:(0,o.jsx)(m.xI,(0,n._)({},a))})},h=()=>{var e=i.useContext(p),a=i.useContext(g),s=(0,m.xW)(),r=s.getFieldState,t=s.formState,l=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");var d=a.id;return(0,n._)({id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message")},l)},g=i.createContext({}),j=i.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]),t=i.useId();return(0,o.jsx)(g.Provider,{value:{id:t},children:(0,o.jsx)("div",(0,n._)({ref:a,className:(0,u.cn)("space-y-2",s)},r))})});j.displayName="FormItem";var b=i.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]),t=h(),l=t.error,i=t.formItemId;return(0,o.jsx)(x,(0,n._)({ref:a,className:(0,u.cn)(l&&"text-destructive",s),htmlFor:i},r))});b.displayName="FormLabel";var y=i.forwardRef((e,a)=>{var s=(0,r._)({},(0,t._)(e)),l=h(),d=l.error,i=l.formItemId,m=l.formDescriptionId,u=l.formMessageId;return(0,o.jsx)(c.DX,(0,n._)({ref:a,id:i,"aria-describedby":d?"".concat(m," ").concat(u):"".concat(m),"aria-invalid":!!d},s))});y.displayName="FormControl";var w=i.forwardRef((e,a)=>{var s=e.className,r=(0,d._)(e,["className"]),t=h().formDescriptionId;return(0,o.jsx)("p",(0,n._)({ref:a,id:t,className:(0,u.cn)("text-sm text-muted-foreground",s)},r))});w.displayName="FormDescription";var C=i.forwardRef((e,a)=>{var s=e.className,r=e.children,t=(0,d._)(e,["className","children"]),i=h(),c=i.error,m=i.formMessageId,f=c?String(null==c?void 0:c.message):r;return f?(0,o.jsx)("p",(0,l._)((0,n._)({ref:a,id:m,className:(0,u.cn)("text-sm font-medium text-destructive",s)},t),{children:f})):null});C.displayName="FormMessage"}},e=>{e.O(0,[3308,7460,9985,154,5498,3356,2288,636,6593,8792],()=>e(e.s=61720)),_N_E=e.O()}]);