try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7020a028-471e-460e-9d5f-c11d36c42b8e",e._sentryDebugIdIdentifier="sentry-dbid-7020a028-471e-460e-9d5f-c11d36c42b8e")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4139],{26986:function(e,n,t){t.d(n,{OX:function(){return v},Qz:function(){return u},dy:function(){return d},iI:function(){return p},sc:function(){return h},u6:function(){return g},uh:function(){return m},ze:function(){return y}});var r=t(72253),a=t(14932),s=t(47702),o=t(85893),i=t(67294),c=t(53798),l=t(40108),d=function(e){var n=e.shouldScaleBackground,t=(0,s._)(e,["shouldScaleBackground"]);return(0,o.jsx)(c.dy.Root,(0,r._)({shouldScaleBackground:void 0===n||n},t))};d.displayName="Drawer";var u=c.dy.Trigger,f=c.dy.Portal,m=c.dy.Close,x=i.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,o.jsx)(c.dy.Overlay,(0,r._)({ref:n,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80",t)},a))});x.displayName=c.dy.Overlay.displayName;var h=i.forwardRef(function(e,n){var t=e.className,i=e.children,d=(0,s._)(e,["className","children"]);return(0,o.jsxs)(f,{children:[(0,o.jsx)(x,{}),(0,o.jsxs)(c.dy.Content,(0,a._)((0,r._)({ref:n,className:(0,l.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t)},d),{children:[(0,o.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),i]}))]})});h.displayName="DrawerContent";var v=function(e){var n=e.className,t=(0,s._)(e,["className"]);return(0,o.jsx)("div",(0,r._)({className:(0,l.cn)("grid gap-1.5 p-4 text-center sm:text-left",n)},t))};v.displayName="DrawerHeader";var y=function(e){var n=e.className,t=(0,s._)(e,["className"]);return(0,o.jsx)("div",(0,r._)({className:(0,l.cn)("mt-auto flex flex-col gap-2 p-4",n)},t))};y.displayName="DrawerFooter";var p=i.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,o.jsx)(c.dy.Title,(0,r._)({ref:n,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t)},a))});p.displayName=c.dy.Title.displayName;var g=i.forwardRef(function(e,n){var t=e.className,a=(0,s._)(e,["className"]);return(0,o.jsx)(c.dy.Description,(0,r._)({ref:n,className:(0,l.cn)("text-sm text-muted-foreground",t)},a))});g.displayName=c.dy.Description.displayName},11418:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(85893),a=t(67294),s=t(42130),o=t(11163),i=t(41664),c=t.n(i),l=t(93778),d=t(91529),u=t(27245);function f(e){var n=e.isJoined,t=e.actionId,s=(e.userJoinedAmount,e.isPending),o=((0,a.useContext)(l.M)||{}).token;if(!o)return null;var i="/acting/join?symbol=".concat(o.symbol,"&id=").concat(t),d="/my/myaction?symbol=".concat(o.symbol,"&id=").concat(t);return void 0!==s&&s?(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)("div",{className:"loading loading-spinner loading-md"})}):(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:n?(0,r.jsx)(c(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:d,children:"我的参与 >>"}):(0,r.jsx)(u.z,{className:"w-1/2",asChild:!0,children:(0,r.jsx)(c(),{href:i,children:"加入行动 >>"})})})}function m(e){var n=e.actionInfo,t=e.participantCount,i=e.totalAmount,u=e.isJoined,m=e.userJoinedAmount,x=e.isPending,h=e.showActionButtons,v=void 0===h||h,y=e.linkToActionInfo,p=void 0!==y&&y,g=((0,a.useContext)(l.M)||{}).token,N=(0,s.m)().address,b=(0,o.useRouter)();if(!g)return(0,r.jsx)("div",{children:"Token信息加载中..."});var j=i?(0,d.LH)(i):"0";return(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg px-4 pt-2 pb-2 text-sm my-4 ".concat(p?"cursor-pointer hover:bg-gray-200 transition-colors":""),onClick:function(){p&&g&&b.push("/action/info?symbol=".concat(g.symbol,"&id=").concat(n.head.id))},children:[(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("h1",{className:"text-lg mb-1",children:(0,r.jsxs)("div",{className:"flex items-baseline",children:[(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:"No."}),(0,r.jsx)("span",{className:"text-secondary text-xl font-bold mr-2",children:n.head.id.toString()}),(0,r.jsx)("span",{className:"font-bold text-gray-800",children:n.body.title})]})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500 mr-2",children:"参与代币总数:"}),(0,r.jsxs)("span",{className:"font-mono text-secondary",children:[j," "]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500 mr-2",children:"参与地址数:"}),(0,r.jsx)("span",{className:"font-mono text-secondary",children:(null==t?void 0:t.toString())||"0"})]})]}),v&&n&&N&&(0,r.jsx)(f,{isJoined:u,actionId:n.head.id,userJoinedAmount:m,isPending:x}),!v&&(0,r.jsx)("div",{className:"mt-4 flex justify-center",children:(0,r.jsx)(c(),{className:"text-secondary hover:text-secondary/80 text-sm cursor-pointer",href:"/action/info?symbol=".concat(null==g?void 0:g.symbol,"&id=").concat(n.head.id),children:"行动详情 >>"})})]})}},27460:function(e,n,t){var r=t(91309),a=t(85893),s=t(67294),o=t(74855),i=t(78865),c=t(18289),l=t(86501),d=t(91529);n.Z=function(e){var n=e.address,t=e.word,u=e.showCopyButton,f=e.showAddress,m=void 0===f||f,x=e.colorClassName,h=void 0===x?"":x,v=e.colorClassName2,y=void 0===v?"":v,p=(0,r._)((0,s.useState)(!1),2),g=p[0],N=p[1];return(0,a.jsxs)("span",{className:"inline-flex items-center space-x-2",children:[t&&(0,a.jsx)("span",{className:"text-xs",children:t}),m&&!y&&(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=h?h:"text-greyscale-500"),children:(0,d.Vu)(n)}),m&&y&&(0,a.jsxs)("span",{className:"text-[0px]",children:[(0,a.jsx)("span",{className:"font-mono text-xs ".concat(null!=h?h:"text-greyscale-500"),children:"".concat(n.substring(0,6),"...")}),(0,a.jsx)("span",{className:"font-mono text-xs ".concat(y),children:"".concat(n.substring(n.length-4))})]}),(void 0===u||u)&&(0,a.jsx)(o.CopyToClipboard,{text:n,onCopy:function(e,n){n?N(!0):l.ZP.error("复制失败")},children:(0,a.jsx)("button",{className:"flex items-center justify-center p-1 rounded focus:outline-none active:bg-gray-200 md:hover:bg-gray-200",onClick:function(e){e.preventDefault(),e.stopPropagation()},"aria-label":"复制地址",style:{WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",appearance:"none",background:"transparent",backgroundColor:"transparent",border:"none",outline:"none"},children:g?(0,a.jsx)(i.Z,{className:"h-4 w-4 ".concat(null!=h?h:"text-greyscale-500")}):(0,a.jsx)(c.Z,{className:"h-4 w-4 ".concat(null!=h?h:"text-greyscale-500")})})})]})}},90963:function(e,n,t){var r=t(91309),a=t(85893),s=t(67294),o=t(27245),i=t(26986);n.Z=function(e){var n=e.currentRound,t=e.handleChangedRound,c=(0,r._)((0,s.useState)(!1),2),l=c[0],d=c[1],u=function(e){t(e),d(!1)},f=(0,s.useRef)(null),m=(0,s.useRef)(!1);return(0,a.jsxs)(i.dy,{open:l,onOpenChange:d,children:[(0,a.jsx)(i.Qz,{asChild:!0,children:(0,a.jsx)(o.z,{variant:"link",className:"text-secondary no-underline pl-2 pr-1",children:"切换轮次"})}),(0,a.jsxs)(i.sc,{className:"z-[9999] min-h-[25vh]",children:[(0,a.jsxs)(i.OX,{children:[(0,a.jsx)(i.iI,{}),(0,a.jsx)(i.u6,{})]}),(0,a.jsx)("div",{className:"px-4 flex-grow",children:(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto",children:Array.from({length:Number(n)},function(e,t){var r=Number(n)-t;return(0,a.jsx)(o.z,{variant:"ghost",className:"w-full p-2 text-center rounded-none hover:bg-gray-100 touch-manipulation",onPointerDown:function(e){"touch"===e.pointerType?f.current=e.clientY:f.current=null,m.current=!1},onPointerMove:function(e){"touch"===e.pointerType&&null!==f.current&&Math.abs(e.clientY-f.current)>10&&(m.current=!0)},onPointerUp:function(e){"touch"===e.pointerType?(m.current||u(r),f.current=null,m.current=!1):u(r)},style:{touchAction:"manipulation"},children:(0,a.jsxs)("span",{className:"text-lg",children:["第 ",r," 轮"]})},r)})})}),(0,a.jsx)(i.ze,{children:(0,a.jsx)(i.uh,{asChild:!0,children:(0,a.jsx)(o.z,{variant:"outline",children:"关闭"})})})]})]})}},64777:function(e,n,t){var r=t(85893);n.Z=function(e){var n=e.title;return(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-lg font-bold",children:n})})}},42083:function(e,n,t){var r=t(85893),a=t(23432);n.Z=function(){return(0,r.jsx)(a.Z,{className:"mx-auto h-4 w-4 animate-spin text-greyscale-500"})}},36893:function(e,n,t){t.d(n,{r:function(){return d}});var r=t(91309),a=t(67294),s=t(67516),o=t(7724),i=t(98482),c=t(37742),l="0xACea4f086BE05BeA47f3A56788FA3919C7f40799",d=function(e){var n=e.tokenAddress,t=e.actionId,d=e.account,u=(0,a.useMemo)(function(){if(!n||void 0===t)return[];var e=[{address:"0xeBB295af1D4ee9ed92e55EFF4ca5Eb8D4AB81aCE",abi:o.d,functionName:"actionInfo",args:[n,t]},{address:l,abi:i.S,functionName:"amountByActionId",args:[n,t]},{address:l,abi:i.S,functionName:"numOfAccounts",args:[n,t]},{address:l,abi:i.S,functionName:"currentRound",args:[]}];return d&&e.push({address:l,abi:i.S,functionName:"amountByActionIdByAccount",args:[n,t,d]}),e},[n,t,d]),f=(0,s.N)({contracts:u,query:{enabled:!!n&&void 0!==t&&u.length>0}}),m=f.data,x=f.isPending,h=f.error;return(0,a.useMemo)(function(){if(!m||!n||void 0===t)return{actionInfo:void 0,participantCount:void 0,totalAmount:void 0,userJoinedAmount:void 0,isJoined:!1,currentRound:void 0,isPending:x,error:h};var e=(0,r._)(m,5),a=e[0],s=e[1],o=e[2],i=e[3],l=e[4],d=null==a?void 0:a.result,u=(null==s?void 0:s.result)?(0,c.Zu)(s.result):void 0,f=(null==o?void 0:o.result)?(0,c.Zu)(o.result):void 0,v=(null==i?void 0:i.result)?(0,c.Zu)(i.result):void 0,y=(null==l?void 0:l.result)?(0,c.Zu)(l.result):void 0,p=!!y&&y>BigInt(0);return{actionInfo:d,participantCount:f,totalAmount:u,userJoinedAmount:y,isJoined:p,currentRound:v,isPending:x,error:h}},[m,n,t,x,h])}},67516:function(e,n,t){t.d(n,{N:function(){return u}});var r=t(72253),a=t(14932),s=t(97995),o=t(36100),i=t(67294),c=t(95159),l=t(39360),d=t(78942);function u(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.contracts,u=void 0===t?[]:t,f=n.query,m=void 0===f?{}:f,x=(0,d.Z)(n),h=(0,l.x)({config:x}),v=function(e,n={}){return{async queryFn({queryKey:t}){let r=[],a=t[1].contracts.length;for(let e=0;e<a;e++){let a=t[1].contracts[e],s=(n.contracts?.[e]).abi;r.push({...a,abi:s})}let{scopeKey:o,...i}=t[1];return(0,s.J)(e,{...i,contracts:r})},queryKey:function(e={}){let n=[];for(let t of e.contracts??[]){let{abi:r,...a}=t;n.push({...a,chainId:a.chainId??e.chainId})}return["readContracts",(0,o.OP)({...e,contracts:n})]}(n)}}(x,(0,a._)((0,r._)({},n),{chainId:h})),y=(0,i.useMemo)(function(){var e,n=!1,t=!0,r=!1,a=void 0;try{for(var s,o=u[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var i=s.value,c=i.abi,l=i.address,d=i.functionName;if(!c||!l||!d){n=!1;break}n=!0}}catch(e){r=!0,a=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw a}}return!!(n&&(null===(e=m.enabled)||void 0===e||e))},[u,m.enabled]);return(0,c.aM)((0,a._)((0,r._)({},v,m),{enabled:y,structuralSharing:null!==(e=m.structuralSharing)&&void 0!==e?e:o.if}))}}}]);